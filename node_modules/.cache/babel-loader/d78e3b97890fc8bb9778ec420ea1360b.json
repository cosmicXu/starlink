{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport CalendarPart from './range-calendar/CalendarPart';\nimport TodayButton from './calendar/TodayButton';\nimport OkButton from './calendar/OkButton';\nimport TimePickerButton from './calendar/TimePickerButton';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\n\nfunction noop() {}\n\nfunction isEmptyArray(arr) {\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\n    return !i;\n  }));\n}\n\nfunction isArraysEqual(a, b) {\n  if (a === b) return true;\n\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\n    return false;\n  }\n\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n\n  return true;\n}\n\nfunction getValueFromSelectedValue(selectedValue) {\n  var start = selectedValue[0],\n      end = selectedValue[1];\n\n  if (end && (start === undefined || start === null)) {\n    start = end.clone().subtract(1, 'month');\n  }\n\n  if (start && (end === undefined || end === null)) {\n    end = start.clone().add(1, 'month');\n  }\n\n  return [start, end];\n}\n\nfunction normalizeAnchor(props, init) {\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\n  var value = props.value || init && props.defaultValue;\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\n}\n\nfunction generateOptions(length, extraOptionGen) {\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\n\n  for (var value = 0; value < length; value++) {\n    if (arr.indexOf(value) === -1) {\n      arr.push(value);\n    }\n  }\n\n  return arr;\n}\n\nfunction onInputSelect(direction, value, cause) {\n  if (!value) {\n    return;\n  }\n\n  var originalValue = this.state.selectedValue;\n  var selectedValue = originalValue.concat();\n  var index = direction === 'left' ? 0 : 1;\n  selectedValue[index] = value;\n\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\n  }\n\n  this.props.onInputSelect(selectedValue);\n  this.fireSelectValueChange(selectedValue, null, cause || {\n    source: 'dateInput'\n  });\n}\n\nvar RangeCalendar = function (_React$Component) {\n  _inherits(RangeCalendar, _React$Component);\n\n  function RangeCalendar(props) {\n    _classCallCheck(this, RangeCalendar);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\n    var value = normalizeAnchor(props, 1);\n    _this.state = {\n      selectedValue: selectedValue,\n      prevSelectedValue: selectedValue,\n      firstSelectedValue: null,\n      hoverValue: props.hoverValue || [],\n      value: value,\n      showTimePicker: false,\n      mode: props.mode || ['date', 'date'],\n      panelTriggerSource: '' // Trigger by which picker panel: 'start' & 'end'\n\n    };\n    return _this;\n  }\n\n  RangeCalendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var newState = {};\n\n    if ('value' in nextProps) {\n      newState.value = normalizeAnchor(nextProps, 0);\n    }\n\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\n      newState.hoverValue = nextProps.hoverValue;\n    }\n\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = nextProps.selectedValue;\n      newState.prevSelectedValue = nextProps.selectedValue;\n    }\n\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\n      newState.mode = nextProps.mode;\n    }\n\n    return newState;\n  }; // get disabled hours for second picker\n\n\n  RangeCalendar.prototype.render = function render() {\n    var _className, _classnames;\n\n    var props = this.props,\n        state = this.state;\n    var prefixCls = props.prefixCls,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        seperator = props.seperator,\n        timePicker = props.timePicker,\n        showOk = props.showOk,\n        locale = props.locale,\n        showClear = props.showClear,\n        showToday = props.showToday,\n        type = props.type,\n        clearIcon = props.clearIcon;\n    var hoverValue = state.hoverValue,\n        selectedValue = state.selectedValue,\n        mode = state.mode,\n        showTimePicker = state.showTimePicker;\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\n    var classes = classnames(className);\n    var newProps = {\n      selectedValue: state.selectedValue,\n      onSelect: this.onSelect,\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\n    };\n    var placeholder1 = void 0;\n    var placeholder2 = void 0;\n\n    if (dateInputPlaceholder) {\n      if (Array.isArray(dateInputPlaceholder)) {\n        placeholder1 = dateInputPlaceholder[0];\n        placeholder2 = dateInputPlaceholder[1];\n      } else {\n        placeholder1 = placeholder2 = dateInputPlaceholder;\n      }\n    }\n\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\n    var startValue = this.getStartValue();\n    var endValue = this.getEndValue();\n    var todayTime = getTodayTime(startValue);\n    var thisMonth = todayTime.month();\n    var thisYear = todayTime.year();\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month();\n    var extraFooter = props.renderFooter();\n    return React.createElement('div', {\n      ref: this.saveRoot,\n      className: classes,\n      style: props.style,\n      tabIndex: '0',\n      onKeyDown: this.onKeyDown\n    }, props.renderSidebar(), React.createElement('div', {\n      className: prefixCls + '-panel'\n    }, showClear && selectedValue[0] && selectedValue[1] ? React.createElement('a', {\n      role: 'button',\n      title: locale.clear,\n      onClick: this.clear\n    }, clearIcon || React.createElement('span', {\n      className: prefixCls + '-clear-btn'\n    })) : null, React.createElement('div', {\n      className: prefixCls + '-date-panel',\n      onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\n      onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\n    }, React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'left',\n      disabledTime: this.disabledStartTime,\n      disabledMonth: this.disabledStartMonth,\n      format: this.getFormat(),\n      value: startValue,\n      mode: mode[0],\n      placeholder: placeholder1,\n      onInputChange: this.onStartInputChange,\n      onInputSelect: this.onStartInputSelect,\n      onValueChange: this.onStartValueChange,\n      onPanelChange: this.onStartPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker || mode[0] === 'time',\n      enablePrev: true,\n      enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1]),\n      clearIcon: clearIcon\n    })), React.createElement('span', {\n      className: prefixCls + '-range-middle'\n    }, seperator), React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'right',\n      format: this.getFormat(),\n      timePickerDisabledTime: this.getEndDisableTime(),\n      placeholder: placeholder2,\n      value: endValue,\n      mode: mode[1],\n      onInputChange: this.onEndInputChange,\n      onInputSelect: this.onEndInputSelect,\n      onValueChange: this.onEndValueChange,\n      onPanelChange: this.onEndPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker || mode[1] === 'time',\n      disabledTime: this.disabledEndTime,\n      disabledMonth: this.disabledEndMonth,\n      enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\n      enableNext: true,\n      clearIcon: clearIcon\n    }))), React.createElement('div', {\n      className: cls\n    }, showToday || props.timePicker || showOkButton || extraFooter ? React.createElement('div', {\n      className: prefixCls + '-footer-btn'\n    }, extraFooter, showToday ? React.createElement(TodayButton, _extends({}, props, {\n      disabled: isTodayInView,\n      value: state.value[0],\n      onToday: this.onToday,\n      text: locale.backToToday\n    })) : null, props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\n      showTimePicker: showTimePicker || mode[0] === 'time' && mode[1] === 'time',\n      onOpenTimePicker: this.onOpenTimePicker,\n      onCloseTimePicker: this.onCloseTimePicker,\n      timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\n    })) : null, showOkButton ? React.createElement(OkButton, _extends({}, props, {\n      onOk: this.onOk,\n      okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\n    })) : null) : null)));\n  };\n\n  return RangeCalendar;\n}(React.Component);\n\nRangeCalendar.propTypes = _extends({}, propType, {\n  prefixCls: PropTypes.string,\n  dateInputPlaceholder: PropTypes.any,\n  seperator: PropTypes.string,\n  defaultValue: PropTypes.any,\n  value: PropTypes.any,\n  hoverValue: PropTypes.any,\n  mode: PropTypes.arrayOf(PropTypes.oneOf(['time', 'date', 'month', 'year', 'decade'])),\n  showDateInput: PropTypes.bool,\n  timePicker: PropTypes.any,\n  showOk: PropTypes.bool,\n  showToday: PropTypes.bool,\n  defaultSelectedValue: PropTypes.array,\n  selectedValue: PropTypes.array,\n  onOk: PropTypes.func,\n  showClear: PropTypes.bool,\n  locale: PropTypes.object,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onValueChange: PropTypes.func,\n  onHoverChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  format: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  onClear: PropTypes.func,\n  type: PropTypes.any,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.func,\n  clearIcon: PropTypes.node,\n  onKeyDown: PropTypes.func\n});\nRangeCalendar.defaultProps = _extends({}, defaultProp, {\n  type: 'both',\n  seperator: '~',\n  defaultSelectedValue: [],\n  onValueChange: noop,\n  onHoverChange: noop,\n  onPanelChange: noop,\n  disabledTime: noop,\n  onInputSelect: noop,\n  showToday: true,\n  showDateInput: true\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onDatePanelEnter = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange(_this2.state.selectedValue.concat());\n    }\n  };\n\n  this.onDatePanelLeave = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange([]);\n    }\n  };\n\n  this.onSelect = function (value) {\n    var type = _this2.props.type;\n    var _state = _this2.state,\n        selectedValue = _state.selectedValue,\n        prevSelectedValue = _state.prevSelectedValue,\n        firstSelectedValue = _state.firstSelectedValue;\n    var nextSelectedValue = void 0;\n\n    if (type === 'both') {\n      if (!firstSelectedValue) {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      } else if (_this2.compare(firstSelectedValue, value) < 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [firstSelectedValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        syncTime(prevSelectedValue[1], firstSelectedValue);\n        nextSelectedValue = [value, firstSelectedValue];\n      }\n    } else if (type === 'start') {\n      syncTime(prevSelectedValue[0], value);\n      var endValue = selectedValue[1];\n      nextSelectedValue = endValue && _this2.compare(endValue, value) > 0 ? [value, endValue] : [value];\n    } else {\n      // type === 'end'\n      var startValue = selectedValue[0];\n\n      if (startValue && _this2.compare(startValue, value) <= 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [startValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      }\n    }\n\n    _this2.fireSelectValueChange(nextSelectedValue);\n  };\n\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return;\n    }\n\n    var keyCode = event.keyCode;\n    var ctrlKey = event.ctrlKey || event.metaKey;\n    var _state2 = _this2.state,\n        selectedValue = _state2.selectedValue,\n        hoverValue = _state2.hoverValue,\n        firstSelectedValue = _state2.firstSelectedValue,\n        value = _state2.value;\n    var _props = _this2.props,\n        onKeyDown = _props.onKeyDown,\n        disabledDate = _props.disabledDate; // Update last time of the picker\n\n    var updateHoverPoint = function updateHoverPoint(func) {\n      // Change hover to make focus in UI\n      var currentHoverTime = void 0;\n      var nextHoverTime = void 0;\n      var nextHoverValue = void 0;\n\n      if (!firstSelectedValue) {\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\n        nextHoverTime = func(currentHoverTime);\n        nextHoverValue = [nextHoverTime];\n\n        _this2.fireHoverValueChange(nextHoverValue);\n      } else {\n        if (hoverValue.length === 1) {\n          currentHoverTime = hoverValue[0].clone();\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        } else {\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        }\n      } // Find origin hover time on value index\n\n\n      if (nextHoverValue.length >= 2) {\n        var miss = nextHoverValue.some(function (ht) {\n          return !includesTime(value, ht, 'month');\n        });\n\n        if (miss) {\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\n            return t1.valueOf() - t2.valueOf();\n          });\n\n          if (newValue[0].isSame(newValue[1], 'month')) {\n            newValue[1] = newValue[0].clone().add(1, 'month');\n          }\n\n          _this2.fireValueChange(newValue);\n        }\n      } else if (nextHoverValue.length === 1) {\n        // If only one value, let's keep the origin panel\n        var oriValueIndex = value.findIndex(function (time) {\n          return time.isSame(currentHoverTime, 'month');\n        });\n        if (oriValueIndex === -1) oriValueIndex = 0;\n\n        if (value.every(function (time) {\n          return !time.isSame(nextHoverTime, 'month');\n        })) {\n          var _newValue = value.slice();\n\n          _newValue[oriValueIndex] = nextHoverTime.clone();\n\n          _this2.fireValueChange(_newValue);\n        }\n      }\n\n      event.preventDefault();\n      return nextHoverTime;\n    };\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'weeks');\n        });\n        return;\n\n      case KeyCode.UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'weeks');\n        });\n        return;\n\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'days');\n          });\n        }\n\n        return;\n\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'days');\n          });\n        }\n\n        return;\n\n      case KeyCode.HOME:\n        updateHoverPoint(function (time) {\n          return goStartMonth(time);\n        });\n        return;\n\n      case KeyCode.END:\n        updateHoverPoint(function (time) {\n          return goEndMonth(time);\n        });\n        return;\n\n      case KeyCode.PAGE_DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'month');\n        });\n        return;\n\n      case KeyCode.PAGE_UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'month');\n        });\n        return;\n\n      case KeyCode.ENTER:\n        {\n          var lastValue = void 0;\n\n          if (hoverValue.length === 0) {\n            lastValue = updateHoverPoint(function (time) {\n              return time;\n            });\n          } else if (hoverValue.length === 1) {\n            lastValue = hoverValue[0];\n          } else {\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          }\n\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\n            _this2.onSelect(lastValue);\n          }\n\n          event.preventDefault();\n          return;\n        }\n\n      default:\n        if (onKeyDown) {\n          onKeyDown(event);\n        }\n\n    }\n  };\n\n  this.onDayHover = function (value) {\n    var hoverValue = [];\n    var _state3 = _this2.state,\n        selectedValue = _state3.selectedValue,\n        firstSelectedValue = _state3.firstSelectedValue;\n    var type = _this2.props.type;\n\n    if (type === 'start' && selectedValue[1]) {\n      hoverValue = _this2.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\n    } else if (type === 'end' && selectedValue[0]) {\n      hoverValue = _this2.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\n    } else {\n      if (!firstSelectedValue) {\n        if (_this2.state.hoverValue.length) {\n          _this2.setState({\n            hoverValue: []\n          });\n        }\n\n        return hoverValue;\n      }\n\n      hoverValue = _this2.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\n    }\n\n    _this2.fireHoverValueChange(hoverValue);\n\n    return hoverValue;\n  };\n\n  this.onToday = function () {\n    var startValue = getTodayTime(_this2.state.value[0]);\n    var endValue = startValue.clone().add(1, 'months');\n\n    _this2.setState({\n      value: [startValue, endValue]\n    });\n  };\n\n  this.onOpenTimePicker = function () {\n    _this2.setState({\n      showTimePicker: true\n    });\n  };\n\n  this.onCloseTimePicker = function () {\n    _this2.setState({\n      showTimePicker: false\n    });\n  };\n\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    if (_this2.isAllowedDateAndTime(selectedValue)) {\n      _this2.props.onOk(_this2.state.selectedValue);\n    }\n  };\n\n  this.onStartInputChange = function () {\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\n      oargs[_key] = arguments[_key];\n    }\n\n    var args = ['left'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onEndInputChange = function () {\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      oargs[_key2] = arguments[_key2];\n    }\n\n    var args = ['right'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onStartInputSelect = function (value) {\n    var args = ['left', value, {\n      source: 'dateInputSelect'\n    }];\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onEndInputSelect = function (value) {\n    var args = ['right', value, {\n      source: 'dateInputSelect'\n    }];\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onStartValueChange = function (leftValue) {\n    var value = [].concat(_this2.state.value);\n    value[0] = leftValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onEndValueChange = function (rightValue) {\n    var value = [].concat(_this2.state.value);\n    value[1] = rightValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onStartPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n    var newMode = [mode, state.mode[1]];\n    var newState = {\n      panelTriggerSource: 'start'\n    };\n\n    if (!('mode' in props)) {\n      newState.mode = newMode;\n    }\n\n    _this2.setState(newState);\n\n    var newValue = [value || state.value[0], state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.onEndPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n    var newMode = [state.mode[0], mode];\n    var newState = {\n      panelTriggerSource: 'end'\n    };\n\n    if (!('mode' in props)) {\n      newState.mode = newMode;\n    }\n\n    _this2.setState(newState);\n\n    var newValue = [state.value[0], value || state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.getStartValue = function () {\n    var _state4 = _this2.state,\n        selectedValue = _state4.selectedValue,\n        showTimePicker = _state4.showTimePicker,\n        value = _state4.value,\n        mode = _state4.mode,\n        panelTriggerSource = _state4.panelTriggerSource;\n    var startValue = value[0]; // keep selectedTime when select date\n\n    if (selectedValue[0] && _this2.props.timePicker) {\n      startValue = startValue.clone();\n      syncTime(selectedValue[0], startValue);\n    }\n\n    if (showTimePicker && selectedValue[0]) {\n      startValue = selectedValue[0];\n    } // Adjust month if date not align\n\n\n    if (panelTriggerSource === 'end' && mode[0] === 'date' && mode[1] === 'date' && startValue.isSame(value[1], 'month')) {\n      startValue = startValue.clone().subtract(1, 'month');\n    }\n\n    return startValue;\n  };\n\n  this.getEndValue = function () {\n    var _state5 = _this2.state,\n        value = _state5.value,\n        selectedValue = _state5.selectedValue,\n        showTimePicker = _state5.showTimePicker,\n        mode = _state5.mode,\n        panelTriggerSource = _state5.panelTriggerSource;\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month'); // keep selectedTime when select date\n\n    if (selectedValue[1] && _this2.props.timePicker) {\n      syncTime(selectedValue[1], endValue);\n    }\n\n    if (showTimePicker) {\n      endValue = selectedValue[1] ? selectedValue[1] : _this2.getStartValue();\n    } // Adjust month if date not align\n\n\n    if (!showTimePicker && panelTriggerSource !== 'end' && mode[0] === 'date' && mode[1] === 'date' && endValue.isSame(value[0], 'month')) {\n      endValue = endValue.clone().add(1, 'month');\n    }\n\n    return endValue;\n  };\n\n  this.getEndDisableTime = function () {\n    var _state6 = _this2.state,\n        selectedValue = _state6.selectedValue,\n        value = _state6.value;\n    var disabledTime = _this2.props.disabledTime;\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\n    var startValue = selectedValue && selectedValue[0] || value[0].clone(); // if startTime and endTime is same day..\n    // the second time picker will not able to pick time before first time picker\n\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\n      var hours = startValue.hour();\n      var minutes = startValue.minute();\n      var second = startValue.second();\n      var _disabledHours = userSettingDisabledTime.disabledHours,\n          _disabledMinutes = userSettingDisabledTime.disabledMinutes,\n          _disabledSeconds = userSettingDisabledTime.disabledSeconds;\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\n      _disabledHours = generateOptions(hours, _disabledHours);\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\n      return {\n        disabledHours: function disabledHours() {\n          return _disabledHours;\n        },\n        disabledMinutes: function disabledMinutes(hour) {\n          if (hour === hours) {\n            return _disabledMinutes;\n          }\n\n          return oldDisabledMinutes;\n        },\n        disabledSeconds: function disabledSeconds(hour, minute) {\n          if (hour === hours && minute === minutes) {\n            return _disabledSeconds;\n          }\n\n          return olddisabledSeconds;\n        }\n      };\n    }\n\n    return userSettingDisabledTime;\n  };\n\n  this.isAllowedDateAndTime = function (selectedValue) {\n    return isAllowedDate(selectedValue[0], _this2.props.disabledDate, _this2.disabledStartTime) && isAllowedDate(selectedValue[1], _this2.props.disabledDate, _this2.disabledEndTime);\n  };\n\n  this.isMonthYearPanelShow = function (mode) {\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\n  };\n\n  this.hasSelectedValue = function () {\n    var selectedValue = _this2.state.selectedValue;\n    return !!selectedValue[1] && !!selectedValue[0];\n  };\n\n  this.compare = function (v1, v2) {\n    if (_this2.props.timePicker) {\n      return v1.diff(v2);\n    }\n\n    return v1.diff(v2, 'days');\n  };\n\n  this.fireSelectValueChange = function (selectedValue, direct, cause) {\n    var timePicker = _this2.props.timePicker;\n    var prevSelectedValue = _this2.state.prevSelectedValue;\n\n    if (timePicker && timePicker.props.defaultValue) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n\n      if (!prevSelectedValue[0] && selectedValue[0]) {\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\n      }\n\n      if (!prevSelectedValue[1] && selectedValue[1]) {\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\n      }\n    }\n\n    if (!('selectedValue' in _this2.props)) {\n      _this2.setState({\n        selectedValue: selectedValue\n      });\n    } // 尚未选择过时间，直接输入的话\n\n\n    if (!_this2.state.selectedValue[0] || !_this2.state.selectedValue[1]) {\n      var startValue = selectedValue[0] || moment();\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\n\n      _this2.setState({\n        selectedValue: selectedValue,\n        value: getValueFromSelectedValue([startValue, endValue])\n      });\n    }\n\n    if (selectedValue[0] && !selectedValue[1]) {\n      _this2.setState({\n        firstSelectedValue: selectedValue[0]\n      });\n\n      _this2.fireHoverValueChange(selectedValue.concat());\n    }\n\n    _this2.props.onChange(selectedValue);\n\n    if (direct || selectedValue[0] && selectedValue[1]) {\n      _this2.setState({\n        prevSelectedValue: selectedValue,\n        firstSelectedValue: null\n      });\n\n      _this2.fireHoverValueChange([]);\n\n      _this2.props.onSelect(selectedValue, cause);\n    }\n  };\n\n  this.fireValueChange = function (value) {\n    var props = _this2.props;\n\n    if (!('value' in props)) {\n      _this2.setState({\n        value: value\n      });\n    }\n\n    props.onValueChange(value);\n  };\n\n  this.fireHoverValueChange = function (hoverValue) {\n    var props = _this2.props;\n\n    if (!('hoverValue' in props)) {\n      _this2.setState({\n        hoverValue: hoverValue\n      });\n    }\n\n    props.onHoverChange(hoverValue);\n  };\n\n  this.clear = function () {\n    _this2.fireSelectValueChange([], true);\n\n    _this2.props.onClear();\n  };\n\n  this.disabledStartTime = function (time) {\n    return _this2.props.disabledTime(time, 'start');\n  };\n\n  this.disabledEndTime = function (time) {\n    return _this2.props.disabledTime(time, 'end');\n  };\n\n  this.disabledStartMonth = function (month) {\n    var value = _this2.state.value;\n    return month.isAfter(value[1], 'month');\n  };\n\n  this.disabledEndMonth = function (month) {\n    var value = _this2.state.value;\n    return month.isBefore(value[0], 'month');\n  };\n};\n\npolyfill(RangeCalendar);\nexport default commonMixinWrapper(RangeCalendar);","map":{"version":3,"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","PropTypes","moment","classnames","polyfill","KeyCode","CalendarPart","TodayButton","OkButton","TimePickerButton","commonMixinWrapper","propType","defaultProp","syncTime","getTodayTime","isAllowedDate","goTime","goStartMonth","goEndMonth","includesTime","noop","isEmptyArray","arr","Array","isArray","length","every","i","isArraysEqual","a","b","getValueFromSelectedValue","selectedValue","start","end","undefined","clone","subtract","add","normalizeAnchor","props","init","defaultSelectedValue","value","defaultValue","normalizedValue","generateOptions","extraOptionGen","concat","indexOf","push","onInputSelect","direction","cause","originalValue","state","index","compare","showTimePicker","fireSelectValueChange","source","RangeCalendar","_React$Component","_this","call","_initialiseProps","prevSelectedValue","firstSelectedValue","hoverValue","mode","panelTriggerSource","getDerivedStateFromProps","nextProps","newState","prototype","render","_className","_classnames","prefixCls","dateInputPlaceholder","seperator","timePicker","showOk","locale","showClear","showToday","type","clearIcon","className","visible","showWeekNumber","classes","newProps","onSelect","onDayHover","placeholder1","placeholder2","showOkButton","cls","startValue","getStartValue","endValue","getEndValue","todayTime","thisMonth","month","thisYear","year","isTodayInView","nextMonthOfStart","isClosestMonths","extraFooter","renderFooter","createElement","ref","saveRoot","style","tabIndex","onKeyDown","renderSidebar","role","title","clear","onClick","onMouseLeave","onDatePanelLeave","onMouseEnter","onDatePanelEnter","disabledTime","disabledStartTime","disabledMonth","disabledStartMonth","format","getFormat","placeholder","onInputChange","onStartInputChange","onStartInputSelect","onValueChange","onStartValueChange","onPanelChange","onStartPanelChange","showDateInput","enablePrev","enableNext","isMonthYearPanelShow","timePickerDisabledTime","getEndDisableTime","onEndInputChange","onEndInputSelect","onEndValueChange","onEndPanelChange","disabledEndTime","disabledEndMonth","disabled","onToday","text","backToToday","onOpenTimePicker","onCloseTimePicker","timePickerDisabled","hasSelectedValue","onOk","okDisabled","isAllowedDateAndTime","Component","propTypes","string","any","arrayOf","oneOf","bool","array","func","object","onChange","onHoverChange","oneOfType","onClear","disabledDate","node","defaultProps","_this2","fireHoverValueChange","_state","nextSelectedValue","event","target","nodeName","toLowerCase","keyCode","ctrlKey","metaKey","_state2","_props","updateHoverPoint","currentHoverTime","nextHoverTime","nextHoverValue","isSame","miss","some","ht","newValue","slice","sort","t1","t2","valueOf","fireValueChange","oriValueIndex","findIndex","time","_newValue","preventDefault","DOWN","UP","LEFT","RIGHT","HOME","END","PAGE_DOWN","PAGE_UP","ENTER","lastValue","_state3","setState","_len","arguments","oargs","_key","args","apply","_len2","_key2","leftValue","rightValue","newMode","_state4","_state5","_state6","userSettingDisabledTime","hours","hour","minutes","minute","second","_disabledHours","disabledHours","_disabledMinutes","disabledMinutes","_disabledSeconds","disabledSeconds","oldDisabledMinutes","olddisabledSeconds","v1","v2","diff","direct","timePickerDefaultValue","isAfter","isBefore"],"sources":["/Users/boyuxu/IdeaProjects/laoOffer/starlink/node_modules/rc-calendar/es/RangeCalendar.js"],"sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport CalendarPart from './range-calendar/CalendarPart';\nimport TodayButton from './calendar/TodayButton';\nimport OkButton from './calendar/OkButton';\nimport TimePickerButton from './calendar/TimePickerButton';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\n\nfunction noop() {}\n\nfunction isEmptyArray(arr) {\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\n    return !i;\n  }));\n}\n\nfunction isArraysEqual(a, b) {\n  if (a === b) return true;\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\n    return false;\n  }\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction getValueFromSelectedValue(selectedValue) {\n  var start = selectedValue[0],\n      end = selectedValue[1];\n\n  if (end && (start === undefined || start === null)) {\n    start = end.clone().subtract(1, 'month');\n  }\n\n  if (start && (end === undefined || end === null)) {\n    end = start.clone().add(1, 'month');\n  }\n  return [start, end];\n}\n\nfunction normalizeAnchor(props, init) {\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\n  var value = props.value || init && props.defaultValue;\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\n}\n\nfunction generateOptions(length, extraOptionGen) {\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\n  for (var value = 0; value < length; value++) {\n    if (arr.indexOf(value) === -1) {\n      arr.push(value);\n    }\n  }\n  return arr;\n}\n\nfunction onInputSelect(direction, value, cause) {\n  if (!value) {\n    return;\n  }\n  var originalValue = this.state.selectedValue;\n  var selectedValue = originalValue.concat();\n  var index = direction === 'left' ? 0 : 1;\n  selectedValue[index] = value;\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\n  }\n  this.props.onInputSelect(selectedValue);\n  this.fireSelectValueChange(selectedValue, null, cause || { source: 'dateInput' });\n}\n\nvar RangeCalendar = function (_React$Component) {\n  _inherits(RangeCalendar, _React$Component);\n\n  function RangeCalendar(props) {\n    _classCallCheck(this, RangeCalendar);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\n    var value = normalizeAnchor(props, 1);\n    _this.state = {\n      selectedValue: selectedValue,\n      prevSelectedValue: selectedValue,\n      firstSelectedValue: null,\n      hoverValue: props.hoverValue || [],\n      value: value,\n      showTimePicker: false,\n      mode: props.mode || ['date', 'date'],\n      panelTriggerSource: '' // Trigger by which picker panel: 'start' & 'end'\n    };\n    return _this;\n  }\n\n  RangeCalendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var newState = {};\n    if ('value' in nextProps) {\n      newState.value = normalizeAnchor(nextProps, 0);\n    }\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\n      newState.hoverValue = nextProps.hoverValue;\n    }\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = nextProps.selectedValue;\n      newState.prevSelectedValue = nextProps.selectedValue;\n    }\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\n      newState.mode = nextProps.mode;\n    }\n    return newState;\n  };\n\n  // get disabled hours for second picker\n\n\n  RangeCalendar.prototype.render = function render() {\n    var _className, _classnames;\n\n    var props = this.props,\n        state = this.state;\n    var prefixCls = props.prefixCls,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        seperator = props.seperator,\n        timePicker = props.timePicker,\n        showOk = props.showOk,\n        locale = props.locale,\n        showClear = props.showClear,\n        showToday = props.showToday,\n        type = props.type,\n        clearIcon = props.clearIcon;\n    var hoverValue = state.hoverValue,\n        selectedValue = state.selectedValue,\n        mode = state.mode,\n        showTimePicker = state.showTimePicker;\n\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\n    var classes = classnames(className);\n    var newProps = {\n      selectedValue: state.selectedValue,\n      onSelect: this.onSelect,\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\n    };\n\n    var placeholder1 = void 0;\n    var placeholder2 = void 0;\n\n    if (dateInputPlaceholder) {\n      if (Array.isArray(dateInputPlaceholder)) {\n        placeholder1 = dateInputPlaceholder[0];\n        placeholder2 = dateInputPlaceholder[1];\n      } else {\n        placeholder1 = placeholder2 = dateInputPlaceholder;\n      }\n    }\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\n\n    var startValue = this.getStartValue();\n    var endValue = this.getEndValue();\n    var todayTime = getTodayTime(startValue);\n    var thisMonth = todayTime.month();\n    var thisYear = todayTime.year();\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month();\n\n    var extraFooter = props.renderFooter();\n\n    return React.createElement(\n      'div',\n      {\n        ref: this.saveRoot,\n        className: classes,\n        style: props.style,\n        tabIndex: '0',\n        onKeyDown: this.onKeyDown\n      },\n      props.renderSidebar(),\n      React.createElement(\n        'div',\n        { className: prefixCls + '-panel' },\n        showClear && selectedValue[0] && selectedValue[1] ? React.createElement(\n          'a',\n          {\n            role: 'button',\n            title: locale.clear,\n            onClick: this.clear\n          },\n          clearIcon || React.createElement('span', { className: prefixCls + '-clear-btn' })\n        ) : null,\n        React.createElement(\n          'div',\n          {\n            className: prefixCls + '-date-panel',\n            onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\n            onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\n          },\n          React.createElement(CalendarPart, _extends({}, props, newProps, {\n            hoverValue: hoverValue,\n            direction: 'left',\n            disabledTime: this.disabledStartTime,\n            disabledMonth: this.disabledStartMonth,\n            format: this.getFormat(),\n            value: startValue,\n            mode: mode[0],\n            placeholder: placeholder1,\n            onInputChange: this.onStartInputChange,\n            onInputSelect: this.onStartInputSelect,\n            onValueChange: this.onStartValueChange,\n            onPanelChange: this.onStartPanelChange,\n            showDateInput: this.props.showDateInput,\n            timePicker: timePicker,\n            showTimePicker: showTimePicker || mode[0] === 'time',\n            enablePrev: true,\n            enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1]),\n            clearIcon: clearIcon\n          })),\n          React.createElement(\n            'span',\n            { className: prefixCls + '-range-middle' },\n            seperator\n          ),\n          React.createElement(CalendarPart, _extends({}, props, newProps, {\n            hoverValue: hoverValue,\n            direction: 'right',\n            format: this.getFormat(),\n            timePickerDisabledTime: this.getEndDisableTime(),\n            placeholder: placeholder2,\n            value: endValue,\n            mode: mode[1],\n            onInputChange: this.onEndInputChange,\n            onInputSelect: this.onEndInputSelect,\n            onValueChange: this.onEndValueChange,\n            onPanelChange: this.onEndPanelChange,\n            showDateInput: this.props.showDateInput,\n            timePicker: timePicker,\n            showTimePicker: showTimePicker || mode[1] === 'time',\n            disabledTime: this.disabledEndTime,\n            disabledMonth: this.disabledEndMonth,\n            enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\n            enableNext: true,\n            clearIcon: clearIcon\n          }))\n        ),\n        React.createElement(\n          'div',\n          { className: cls },\n          showToday || props.timePicker || showOkButton || extraFooter ? React.createElement(\n            'div',\n            { className: prefixCls + '-footer-btn' },\n            extraFooter,\n            showToday ? React.createElement(TodayButton, _extends({}, props, {\n              disabled: isTodayInView,\n              value: state.value[0],\n              onToday: this.onToday,\n              text: locale.backToToday\n            })) : null,\n            props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\n              showTimePicker: showTimePicker || mode[0] === 'time' && mode[1] === 'time',\n              onOpenTimePicker: this.onOpenTimePicker,\n              onCloseTimePicker: this.onCloseTimePicker,\n              timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\n            })) : null,\n            showOkButton ? React.createElement(OkButton, _extends({}, props, {\n              onOk: this.onOk,\n              okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\n            })) : null\n          ) : null\n        )\n      )\n    );\n  };\n\n  return RangeCalendar;\n}(React.Component);\n\nRangeCalendar.propTypes = _extends({}, propType, {\n  prefixCls: PropTypes.string,\n  dateInputPlaceholder: PropTypes.any,\n  seperator: PropTypes.string,\n  defaultValue: PropTypes.any,\n  value: PropTypes.any,\n  hoverValue: PropTypes.any,\n  mode: PropTypes.arrayOf(PropTypes.oneOf(['time', 'date', 'month', 'year', 'decade'])),\n  showDateInput: PropTypes.bool,\n  timePicker: PropTypes.any,\n  showOk: PropTypes.bool,\n  showToday: PropTypes.bool,\n  defaultSelectedValue: PropTypes.array,\n  selectedValue: PropTypes.array,\n  onOk: PropTypes.func,\n  showClear: PropTypes.bool,\n  locale: PropTypes.object,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onValueChange: PropTypes.func,\n  onHoverChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  format: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  onClear: PropTypes.func,\n  type: PropTypes.any,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.func,\n  clearIcon: PropTypes.node,\n  onKeyDown: PropTypes.func\n});\nRangeCalendar.defaultProps = _extends({}, defaultProp, {\n  type: 'both',\n  seperator: '~',\n  defaultSelectedValue: [],\n  onValueChange: noop,\n  onHoverChange: noop,\n  onPanelChange: noop,\n  disabledTime: noop,\n  onInputSelect: noop,\n  showToday: true,\n  showDateInput: true\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onDatePanelEnter = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange(_this2.state.selectedValue.concat());\n    }\n  };\n\n  this.onDatePanelLeave = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange([]);\n    }\n  };\n\n  this.onSelect = function (value) {\n    var type = _this2.props.type;\n    var _state = _this2.state,\n        selectedValue = _state.selectedValue,\n        prevSelectedValue = _state.prevSelectedValue,\n        firstSelectedValue = _state.firstSelectedValue;\n\n    var nextSelectedValue = void 0;\n    if (type === 'both') {\n      if (!firstSelectedValue) {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      } else if (_this2.compare(firstSelectedValue, value) < 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [firstSelectedValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        syncTime(prevSelectedValue[1], firstSelectedValue);\n        nextSelectedValue = [value, firstSelectedValue];\n      }\n    } else if (type === 'start') {\n      syncTime(prevSelectedValue[0], value);\n      var endValue = selectedValue[1];\n      nextSelectedValue = endValue && _this2.compare(endValue, value) > 0 ? [value, endValue] : [value];\n    } else {\n      // type === 'end'\n      var startValue = selectedValue[0];\n      if (startValue && _this2.compare(startValue, value) <= 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [startValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      }\n    }\n\n    _this2.fireSelectValueChange(nextSelectedValue);\n  };\n\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return;\n    }\n\n    var keyCode = event.keyCode;\n\n    var ctrlKey = event.ctrlKey || event.metaKey;\n\n    var _state2 = _this2.state,\n        selectedValue = _state2.selectedValue,\n        hoverValue = _state2.hoverValue,\n        firstSelectedValue = _state2.firstSelectedValue,\n        value = _state2.value;\n    var _props = _this2.props,\n        onKeyDown = _props.onKeyDown,\n        disabledDate = _props.disabledDate;\n\n    // Update last time of the picker\n\n    var updateHoverPoint = function updateHoverPoint(func) {\n      // Change hover to make focus in UI\n      var currentHoverTime = void 0;\n      var nextHoverTime = void 0;\n      var nextHoverValue = void 0;\n\n      if (!firstSelectedValue) {\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\n        nextHoverTime = func(currentHoverTime);\n        nextHoverValue = [nextHoverTime];\n        _this2.fireHoverValueChange(nextHoverValue);\n      } else {\n        if (hoverValue.length === 1) {\n          currentHoverTime = hoverValue[0].clone();\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        } else {\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        }\n      }\n\n      // Find origin hover time on value index\n      if (nextHoverValue.length >= 2) {\n        var miss = nextHoverValue.some(function (ht) {\n          return !includesTime(value, ht, 'month');\n        });\n        if (miss) {\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\n            return t1.valueOf() - t2.valueOf();\n          });\n          if (newValue[0].isSame(newValue[1], 'month')) {\n            newValue[1] = newValue[0].clone().add(1, 'month');\n          }\n          _this2.fireValueChange(newValue);\n        }\n      } else if (nextHoverValue.length === 1) {\n        // If only one value, let's keep the origin panel\n        var oriValueIndex = value.findIndex(function (time) {\n          return time.isSame(currentHoverTime, 'month');\n        });\n        if (oriValueIndex === -1) oriValueIndex = 0;\n\n        if (value.every(function (time) {\n          return !time.isSame(nextHoverTime, 'month');\n        })) {\n          var _newValue = value.slice();\n          _newValue[oriValueIndex] = nextHoverTime.clone();\n          _this2.fireValueChange(_newValue);\n        }\n      }\n\n      event.preventDefault();\n\n      return nextHoverTime;\n    };\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'weeks');\n        });\n        return;\n      case KeyCode.UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'weeks');\n        });\n        return;\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'days');\n          });\n        }\n        return;\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'days');\n          });\n        }\n        return;\n      case KeyCode.HOME:\n        updateHoverPoint(function (time) {\n          return goStartMonth(time);\n        });\n        return;\n      case KeyCode.END:\n        updateHoverPoint(function (time) {\n          return goEndMonth(time);\n        });\n        return;\n      case KeyCode.PAGE_DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'month');\n        });\n        return;\n      case KeyCode.PAGE_UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'month');\n        });\n        return;\n      case KeyCode.ENTER:\n        {\n          var lastValue = void 0;\n          if (hoverValue.length === 0) {\n            lastValue = updateHoverPoint(function (time) {\n              return time;\n            });\n          } else if (hoverValue.length === 1) {\n            lastValue = hoverValue[0];\n          } else {\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          }\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\n            _this2.onSelect(lastValue);\n          }\n          event.preventDefault();\n          return;\n        }\n      default:\n        if (onKeyDown) {\n          onKeyDown(event);\n        }\n    }\n  };\n\n  this.onDayHover = function (value) {\n    var hoverValue = [];\n    var _state3 = _this2.state,\n        selectedValue = _state3.selectedValue,\n        firstSelectedValue = _state3.firstSelectedValue;\n    var type = _this2.props.type;\n\n    if (type === 'start' && selectedValue[1]) {\n      hoverValue = _this2.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\n    } else if (type === 'end' && selectedValue[0]) {\n      hoverValue = _this2.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\n    } else {\n      if (!firstSelectedValue) {\n        if (_this2.state.hoverValue.length) {\n          _this2.setState({ hoverValue: [] });\n        }\n        return hoverValue;\n      }\n      hoverValue = _this2.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\n    }\n    _this2.fireHoverValueChange(hoverValue);\n\n    return hoverValue;\n  };\n\n  this.onToday = function () {\n    var startValue = getTodayTime(_this2.state.value[0]);\n    var endValue = startValue.clone().add(1, 'months');\n    _this2.setState({ value: [startValue, endValue] });\n  };\n\n  this.onOpenTimePicker = function () {\n    _this2.setState({\n      showTimePicker: true\n    });\n  };\n\n  this.onCloseTimePicker = function () {\n    _this2.setState({\n      showTimePicker: false\n    });\n  };\n\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    if (_this2.isAllowedDateAndTime(selectedValue)) {\n      _this2.props.onOk(_this2.state.selectedValue);\n    }\n  };\n\n  this.onStartInputChange = function () {\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\n      oargs[_key] = arguments[_key];\n    }\n\n    var args = ['left'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onEndInputChange = function () {\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      oargs[_key2] = arguments[_key2];\n    }\n\n    var args = ['right'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onStartInputSelect = function (value) {\n    var args = ['left', value, { source: 'dateInputSelect' }];\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onEndInputSelect = function (value) {\n    var args = ['right', value, { source: 'dateInputSelect' }];\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onStartValueChange = function (leftValue) {\n    var value = [].concat(_this2.state.value);\n    value[0] = leftValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onEndValueChange = function (rightValue) {\n    var value = [].concat(_this2.state.value);\n    value[1] = rightValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onStartPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n\n    var newMode = [mode, state.mode[1]];\n    var newState = {\n      panelTriggerSource: 'start'\n    };\n    if (!('mode' in props)) {\n      newState.mode = newMode;\n    }\n    _this2.setState(newState);\n    var newValue = [value || state.value[0], state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.onEndPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n\n    var newMode = [state.mode[0], mode];\n    var newState = {\n      panelTriggerSource: 'end'\n    };\n    if (!('mode' in props)) {\n      newState.mode = newMode;\n    }\n    _this2.setState(newState);\n    var newValue = [state.value[0], value || state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.getStartValue = function () {\n    var _state4 = _this2.state,\n        selectedValue = _state4.selectedValue,\n        showTimePicker = _state4.showTimePicker,\n        value = _state4.value,\n        mode = _state4.mode,\n        panelTriggerSource = _state4.panelTriggerSource;\n\n    var startValue = value[0];\n    // keep selectedTime when select date\n    if (selectedValue[0] && _this2.props.timePicker) {\n      startValue = startValue.clone();\n      syncTime(selectedValue[0], startValue);\n    }\n    if (showTimePicker && selectedValue[0]) {\n      startValue = selectedValue[0];\n    }\n\n    // Adjust month if date not align\n    if (panelTriggerSource === 'end' && mode[0] === 'date' && mode[1] === 'date' && startValue.isSame(value[1], 'month')) {\n      startValue = startValue.clone().subtract(1, 'month');\n    }\n\n    return startValue;\n  };\n\n  this.getEndValue = function () {\n    var _state5 = _this2.state,\n        value = _state5.value,\n        selectedValue = _state5.selectedValue,\n        showTimePicker = _state5.showTimePicker,\n        mode = _state5.mode,\n        panelTriggerSource = _state5.panelTriggerSource;\n\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month');\n    // keep selectedTime when select date\n    if (selectedValue[1] && _this2.props.timePicker) {\n      syncTime(selectedValue[1], endValue);\n    }\n    if (showTimePicker) {\n      endValue = selectedValue[1] ? selectedValue[1] : _this2.getStartValue();\n    }\n\n    // Adjust month if date not align\n    if (!showTimePicker && panelTriggerSource !== 'end' && mode[0] === 'date' && mode[1] === 'date' && endValue.isSame(value[0], 'month')) {\n      endValue = endValue.clone().add(1, 'month');\n    }\n\n    return endValue;\n  };\n\n  this.getEndDisableTime = function () {\n    var _state6 = _this2.state,\n        selectedValue = _state6.selectedValue,\n        value = _state6.value;\n    var disabledTime = _this2.props.disabledTime;\n\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\n    var startValue = selectedValue && selectedValue[0] || value[0].clone();\n    // if startTime and endTime is same day..\n    // the second time picker will not able to pick time before first time picker\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\n      var hours = startValue.hour();\n      var minutes = startValue.minute();\n      var second = startValue.second();\n      var _disabledHours = userSettingDisabledTime.disabledHours,\n          _disabledMinutes = userSettingDisabledTime.disabledMinutes,\n          _disabledSeconds = userSettingDisabledTime.disabledSeconds;\n\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\n      _disabledHours = generateOptions(hours, _disabledHours);\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\n      return {\n        disabledHours: function disabledHours() {\n          return _disabledHours;\n        },\n        disabledMinutes: function disabledMinutes(hour) {\n          if (hour === hours) {\n            return _disabledMinutes;\n          }\n          return oldDisabledMinutes;\n        },\n        disabledSeconds: function disabledSeconds(hour, minute) {\n          if (hour === hours && minute === minutes) {\n            return _disabledSeconds;\n          }\n          return olddisabledSeconds;\n        }\n      };\n    }\n    return userSettingDisabledTime;\n  };\n\n  this.isAllowedDateAndTime = function (selectedValue) {\n    return isAllowedDate(selectedValue[0], _this2.props.disabledDate, _this2.disabledStartTime) && isAllowedDate(selectedValue[1], _this2.props.disabledDate, _this2.disabledEndTime);\n  };\n\n  this.isMonthYearPanelShow = function (mode) {\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\n  };\n\n  this.hasSelectedValue = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    return !!selectedValue[1] && !!selectedValue[0];\n  };\n\n  this.compare = function (v1, v2) {\n    if (_this2.props.timePicker) {\n      return v1.diff(v2);\n    }\n    return v1.diff(v2, 'days');\n  };\n\n  this.fireSelectValueChange = function (selectedValue, direct, cause) {\n    var timePicker = _this2.props.timePicker;\n    var prevSelectedValue = _this2.state.prevSelectedValue;\n\n    if (timePicker && timePicker.props.defaultValue) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n      if (!prevSelectedValue[0] && selectedValue[0]) {\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\n      }\n      if (!prevSelectedValue[1] && selectedValue[1]) {\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\n      }\n    }\n\n    if (!('selectedValue' in _this2.props)) {\n      _this2.setState({\n        selectedValue: selectedValue\n      });\n    }\n\n    // 尚未选择过时间，直接输入的话\n    if (!_this2.state.selectedValue[0] || !_this2.state.selectedValue[1]) {\n      var startValue = selectedValue[0] || moment();\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\n      _this2.setState({\n        selectedValue: selectedValue,\n        value: getValueFromSelectedValue([startValue, endValue])\n      });\n    }\n\n    if (selectedValue[0] && !selectedValue[1]) {\n      _this2.setState({ firstSelectedValue: selectedValue[0] });\n      _this2.fireHoverValueChange(selectedValue.concat());\n    }\n    _this2.props.onChange(selectedValue);\n    if (direct || selectedValue[0] && selectedValue[1]) {\n      _this2.setState({\n        prevSelectedValue: selectedValue,\n        firstSelectedValue: null\n      });\n      _this2.fireHoverValueChange([]);\n      _this2.props.onSelect(selectedValue, cause);\n    }\n  };\n\n  this.fireValueChange = function (value) {\n    var props = _this2.props;\n    if (!('value' in props)) {\n      _this2.setState({\n        value: value\n      });\n    }\n    props.onValueChange(value);\n  };\n\n  this.fireHoverValueChange = function (hoverValue) {\n    var props = _this2.props;\n    if (!('hoverValue' in props)) {\n      _this2.setState({ hoverValue: hoverValue });\n    }\n    props.onHoverChange(hoverValue);\n  };\n\n  this.clear = function () {\n    _this2.fireSelectValueChange([], true);\n    _this2.props.onClear();\n  };\n\n  this.disabledStartTime = function (time) {\n    return _this2.props.disabledTime(time, 'start');\n  };\n\n  this.disabledEndTime = function (time) {\n    return _this2.props.disabledTime(time, 'end');\n  };\n\n  this.disabledStartMonth = function (month) {\n    var value = _this2.state.value;\n\n    return month.isAfter(value[1], 'month');\n  };\n\n  this.disabledEndMonth = function (month) {\n    var value = _this2.state.value;\n\n    return month.isBefore(value[0], 'month');\n  };\n};\n\npolyfill(RangeCalendar);\n\nexport default commonMixinWrapper(RangeCalendar);"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,+BAArB;AACA,OAAOC,eAAP,MAA4B,sCAA5B;AACA,OAAOC,0BAAP,MAAuC,iDAAvC;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,QAAT,QAAyB,yBAAzB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,gBAAP,MAA6B,6BAA7B;AACA,SAASC,kBAAT,EAA6BC,QAA7B,EAAuCC,WAAvC,QAA0D,qBAA1D;AACA,SAASC,QAAT,EAAmBC,YAAnB,EAAiCC,aAAjC,QAAsD,QAAtD;AACA,SAASC,MAAT,EAAiBC,YAAjB,EAA+BC,UAA/B,EAA2CC,YAA3C,QAA+D,eAA/D;;AAEA,SAASC,IAAT,GAAgB,CAAE;;AAElB,SAASC,YAAT,CAAsBC,GAAtB,EAA2B;EACzB,OAAOC,KAAK,CAACC,OAAN,CAAcF,GAAd,MAAuBA,GAAG,CAACG,MAAJ,KAAe,CAAf,IAAoBH,GAAG,CAACI,KAAJ,CAAU,UAAUC,CAAV,EAAa;IACvE,OAAO,CAACA,CAAR;EACD,CAFiD,CAA3C,CAAP;AAGD;;AAED,SAASC,aAAT,CAAuBC,CAAvB,EAA0BC,CAA1B,EAA6B;EAC3B,IAAID,CAAC,KAAKC,CAAV,EAAa,OAAO,IAAP;;EACb,IAAID,CAAC,KAAK,IAAN,IAAc,OAAOA,CAAP,KAAa,WAA3B,IAA0CC,CAAC,KAAK,IAAhD,IAAwD,OAAOA,CAAP,KAAa,WAAzE,EAAsF;IACpF,OAAO,KAAP;EACD;;EACD,IAAID,CAAC,CAACJ,MAAF,KAAaK,CAAC,CAACL,MAAnB,EAA2B,OAAO,KAAP;;EAE3B,KAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,CAAC,CAACJ,MAAtB,EAA8B,EAAEE,CAAhC,EAAmC;IACjC,IAAIE,CAAC,CAACF,CAAD,CAAD,KAASG,CAAC,CAACH,CAAD,CAAd,EAAmB,OAAO,KAAP;EACpB;;EACD,OAAO,IAAP;AACD;;AAED,SAASI,yBAAT,CAAmCC,aAAnC,EAAkD;EAChD,IAAIC,KAAK,GAAGD,aAAa,CAAC,CAAD,CAAzB;EAAA,IACIE,GAAG,GAAGF,aAAa,CAAC,CAAD,CADvB;;EAGA,IAAIE,GAAG,KAAKD,KAAK,KAAKE,SAAV,IAAuBF,KAAK,KAAK,IAAtC,CAAP,EAAoD;IAClDA,KAAK,GAAGC,GAAG,CAACE,KAAJ,GAAYC,QAAZ,CAAqB,CAArB,EAAwB,OAAxB,CAAR;EACD;;EAED,IAAIJ,KAAK,KAAKC,GAAG,KAAKC,SAAR,IAAqBD,GAAG,KAAK,IAAlC,CAAT,EAAkD;IAChDA,GAAG,GAAGD,KAAK,CAACG,KAAN,GAAcE,GAAd,CAAkB,CAAlB,EAAqB,OAArB,CAAN;EACD;;EACD,OAAO,CAACL,KAAD,EAAQC,GAAR,CAAP;AACD;;AAED,SAASK,eAAT,CAAyBC,KAAzB,EAAgCC,IAAhC,EAAsC;EACpC,IAAIT,aAAa,GAAGQ,KAAK,CAACR,aAAN,IAAuBS,IAAI,IAAID,KAAK,CAACE,oBAAzD;EACA,IAAIC,KAAK,GAAGH,KAAK,CAACG,KAAN,IAAeF,IAAI,IAAID,KAAK,CAACI,YAAzC;EACA,IAAIC,eAAe,GAAGF,KAAK,GAAGZ,yBAAyB,CAACY,KAAD,CAA5B,GAAsCZ,yBAAyB,CAACC,aAAD,CAA1F;EACA,OAAO,CAACX,YAAY,CAACwB,eAAD,CAAb,GAAiCA,eAAjC,GAAmDJ,IAAI,IAAI,CAACvC,MAAM,EAAP,EAAWA,MAAM,GAAGoC,GAAT,CAAa,CAAb,EAAgB,QAAhB,CAAX,CAAlE;AACD;;AAED,SAASQ,eAAT,CAAyBrB,MAAzB,EAAiCsB,cAAjC,EAAiD;EAC/C,IAAIzB,GAAG,GAAGyB,cAAc,GAAGA,cAAc,GAAGC,MAAjB,EAAH,GAA+B,EAAvD;;EACA,KAAK,IAAIL,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGlB,MAA5B,EAAoCkB,KAAK,EAAzC,EAA6C;IAC3C,IAAIrB,GAAG,CAAC2B,OAAJ,CAAYN,KAAZ,MAAuB,CAAC,CAA5B,EAA+B;MAC7BrB,GAAG,CAAC4B,IAAJ,CAASP,KAAT;IACD;EACF;;EACD,OAAOrB,GAAP;AACD;;AAED,SAAS6B,aAAT,CAAuBC,SAAvB,EAAkCT,KAAlC,EAAyCU,KAAzC,EAAgD;EAC9C,IAAI,CAACV,KAAL,EAAY;IACV;EACD;;EACD,IAAIW,aAAa,GAAG,KAAKC,KAAL,CAAWvB,aAA/B;EACA,IAAIA,aAAa,GAAGsB,aAAa,CAACN,MAAd,EAApB;EACA,IAAIQ,KAAK,GAAGJ,SAAS,KAAK,MAAd,GAAuB,CAAvB,GAA2B,CAAvC;EACApB,aAAa,CAACwB,KAAD,CAAb,GAAuBb,KAAvB;;EACA,IAAIX,aAAa,CAAC,CAAD,CAAb,IAAoB,KAAKyB,OAAL,CAAazB,aAAa,CAAC,CAAD,CAA1B,EAA+BA,aAAa,CAAC,CAAD,CAA5C,IAAmD,CAA3E,EAA8E;IAC5EA,aAAa,CAAC,IAAIwB,KAAL,CAAb,GAA2B,KAAKD,KAAL,CAAWG,cAAX,GAA4B1B,aAAa,CAACwB,KAAD,CAAzC,GAAmDrB,SAA9E;EACD;;EACD,KAAKK,KAAL,CAAWW,aAAX,CAAyBnB,aAAzB;EACA,KAAK2B,qBAAL,CAA2B3B,aAA3B,EAA0C,IAA1C,EAAgDqB,KAAK,IAAI;IAAEO,MAAM,EAAE;EAAV,CAAzD;AACD;;AAED,IAAIC,aAAa,GAAG,UAAUC,gBAAV,EAA4B;EAC9C/D,SAAS,CAAC8D,aAAD,EAAgBC,gBAAhB,CAAT;;EAEA,SAASD,aAAT,CAAuBrB,KAAvB,EAA8B;IAC5B3C,eAAe,CAAC,IAAD,EAAOgE,aAAP,CAAf;;IAEA,IAAIE,KAAK,GAAGjE,0BAA0B,CAAC,IAAD,EAAOgE,gBAAgB,CAACE,IAAjB,CAAsB,IAAtB,EAA4BxB,KAA5B,CAAP,CAAtC;;IAEAyB,gBAAgB,CAACD,IAAjB,CAAsBD,KAAtB;;IAEA,IAAI/B,aAAa,GAAGQ,KAAK,CAACR,aAAN,IAAuBQ,KAAK,CAACE,oBAAjD;IACA,IAAIC,KAAK,GAAGJ,eAAe,CAACC,KAAD,EAAQ,CAAR,CAA3B;IACAuB,KAAK,CAACR,KAAN,GAAc;MACZvB,aAAa,EAAEA,aADH;MAEZkC,iBAAiB,EAAElC,aAFP;MAGZmC,kBAAkB,EAAE,IAHR;MAIZC,UAAU,EAAE5B,KAAK,CAAC4B,UAAN,IAAoB,EAJpB;MAKZzB,KAAK,EAAEA,KALK;MAMZe,cAAc,EAAE,KANJ;MAOZW,IAAI,EAAE7B,KAAK,CAAC6B,IAAN,IAAc,CAAC,MAAD,EAAS,MAAT,CAPR;MAQZC,kBAAkB,EAAE,EARR,CAQW;;IARX,CAAd;IAUA,OAAOP,KAAP;EACD;;EAEDF,aAAa,CAACU,wBAAd,GAAyC,SAASA,wBAAT,CAAkCC,SAAlC,EAA6CjB,KAA7C,EAAoD;IAC3F,IAAIkB,QAAQ,GAAG,EAAf;;IACA,IAAI,WAAWD,SAAf,EAA0B;MACxBC,QAAQ,CAAC9B,KAAT,GAAiBJ,eAAe,CAACiC,SAAD,EAAY,CAAZ,CAAhC;IACD;;IACD,IAAI,gBAAgBA,SAAhB,IAA6B,CAAC5C,aAAa,CAAC2B,KAAK,CAACa,UAAP,EAAmBI,SAAS,CAACJ,UAA7B,CAA/C,EAAyF;MACvFK,QAAQ,CAACL,UAAT,GAAsBI,SAAS,CAACJ,UAAhC;IACD;;IACD,IAAI,mBAAmBI,SAAvB,EAAkC;MAChCC,QAAQ,CAACzC,aAAT,GAAyBwC,SAAS,CAACxC,aAAnC;MACAyC,QAAQ,CAACP,iBAAT,GAA6BM,SAAS,CAACxC,aAAvC;IACD;;IACD,IAAI,UAAUwC,SAAV,IAAuB,CAAC5C,aAAa,CAAC2B,KAAK,CAACc,IAAP,EAAaG,SAAS,CAACH,IAAvB,CAAzC,EAAuE;MACrEI,QAAQ,CAACJ,IAAT,GAAgBG,SAAS,CAACH,IAA1B;IACD;;IACD,OAAOI,QAAP;EACD,CAhBD,CAzB8C,CA2C9C;;;EAGAZ,aAAa,CAACa,SAAd,CAAwBC,MAAxB,GAAiC,SAASA,MAAT,GAAkB;IACjD,IAAIC,UAAJ,EAAgBC,WAAhB;;IAEA,IAAIrC,KAAK,GAAG,KAAKA,KAAjB;IAAA,IACIe,KAAK,GAAG,KAAKA,KADjB;IAEA,IAAIuB,SAAS,GAAGtC,KAAK,CAACsC,SAAtB;IAAA,IACIC,oBAAoB,GAAGvC,KAAK,CAACuC,oBADjC;IAAA,IAEIC,SAAS,GAAGxC,KAAK,CAACwC,SAFtB;IAAA,IAGIC,UAAU,GAAGzC,KAAK,CAACyC,UAHvB;IAAA,IAIIC,MAAM,GAAG1C,KAAK,CAAC0C,MAJnB;IAAA,IAKIC,MAAM,GAAG3C,KAAK,CAAC2C,MALnB;IAAA,IAMIC,SAAS,GAAG5C,KAAK,CAAC4C,SANtB;IAAA,IAOIC,SAAS,GAAG7C,KAAK,CAAC6C,SAPtB;IAAA,IAQIC,IAAI,GAAG9C,KAAK,CAAC8C,IARjB;IAAA,IASIC,SAAS,GAAG/C,KAAK,CAAC+C,SATtB;IAUA,IAAInB,UAAU,GAAGb,KAAK,CAACa,UAAvB;IAAA,IACIpC,aAAa,GAAGuB,KAAK,CAACvB,aAD1B;IAAA,IAEIqC,IAAI,GAAGd,KAAK,CAACc,IAFjB;IAAA,IAGIX,cAAc,GAAGH,KAAK,CAACG,cAH3B;IAKA,IAAI8B,SAAS,IAAIZ,UAAU,GAAG,EAAb,EAAiBA,UAAU,CAACpC,KAAK,CAACgD,SAAP,CAAV,GAA8B,CAAC,CAAChD,KAAK,CAACgD,SAAvD,EAAkEZ,UAAU,CAACE,SAAD,CAAV,GAAwB,CAA1F,EAA6FF,UAAU,CAACE,SAAS,GAAG,SAAb,CAAV,GAAoC,CAACtC,KAAK,CAACiD,OAAxI,EAAiJb,UAAU,CAACE,SAAS,GAAG,QAAb,CAAV,GAAmC,CAApL,EAAuLF,UAAU,CAACE,SAAS,GAAG,mBAAb,CAAV,GAA8CpB,cAArO,EAAqPkB,UAAU,CAACE,SAAS,GAAG,cAAb,CAAV,GAAyCtC,KAAK,CAACkD,cAApS,EAAoTd,UAAxT,CAAb;IACA,IAAIe,OAAO,GAAGxF,UAAU,CAACqF,SAAD,CAAxB;IACA,IAAII,QAAQ,GAAG;MACb5D,aAAa,EAAEuB,KAAK,CAACvB,aADR;MAEb6D,QAAQ,EAAE,KAAKA,QAFF;MAGbC,UAAU,EAAER,IAAI,KAAK,OAAT,IAAoBtD,aAAa,CAAC,CAAD,CAAjC,IAAwCsD,IAAI,KAAK,KAAT,IAAkBtD,aAAa,CAAC,CAAD,CAAvE,IAA8E,CAAC,CAACoC,UAAU,CAAC3C,MAA3F,GAAoG,KAAKqE,UAAzG,GAAsH3D;IAHrH,CAAf;IAMA,IAAI4D,YAAY,GAAG,KAAK,CAAxB;IACA,IAAIC,YAAY,GAAG,KAAK,CAAxB;;IAEA,IAAIjB,oBAAJ,EAA0B;MACxB,IAAIxD,KAAK,CAACC,OAAN,CAAcuD,oBAAd,CAAJ,EAAyC;QACvCgB,YAAY,GAAGhB,oBAAoB,CAAC,CAAD,CAAnC;QACAiB,YAAY,GAAGjB,oBAAoB,CAAC,CAAD,CAAnC;MACD,CAHD,MAGO;QACLgB,YAAY,GAAGC,YAAY,GAAGjB,oBAA9B;MACD;IACF;;IACD,IAAIkB,YAAY,GAAGf,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAX,IAAoB,CAAC,CAACD,UAA5D;IACA,IAAIiB,GAAG,GAAG/F,UAAU,EAAE0E,WAAW,GAAG,EAAd,EAAkBA,WAAW,CAACC,SAAS,GAAG,SAAb,CAAX,GAAqC,IAAvD,EAA6DD,WAAW,CAACC,SAAS,GAAG,eAAb,CAAX,GAA2C,IAAxG,EAA8GD,WAAW,CAACC,SAAS,GAAG,iBAAb,CAAX,GAA6CmB,YAA3J,EAAyKpB,WAA3K,EAApB;IAEA,IAAIsB,UAAU,GAAG,KAAKC,aAAL,EAAjB;IACA,IAAIC,QAAQ,GAAG,KAAKC,WAAL,EAAf;IACA,IAAIC,SAAS,GAAGzF,YAAY,CAACqF,UAAD,CAA5B;IACA,IAAIK,SAAS,GAAGD,SAAS,CAACE,KAAV,EAAhB;IACA,IAAIC,QAAQ,GAAGH,SAAS,CAACI,IAAV,EAAf;IACA,IAAIC,aAAa,GAAGT,UAAU,CAACQ,IAAX,OAAsBD,QAAtB,IAAkCP,UAAU,CAACM,KAAX,OAAuBD,SAAzD,IAAsEH,QAAQ,CAACM,IAAT,OAAoBD,QAApB,IAAgCL,QAAQ,CAACI,KAAT,OAAqBD,SAA/I;IACA,IAAIK,gBAAgB,GAAGV,UAAU,CAAC/D,KAAX,GAAmBE,GAAnB,CAAuB,CAAvB,EAA0B,QAA1B,CAAvB;IACA,IAAIwE,eAAe,GAAGD,gBAAgB,CAACF,IAAjB,OAA4BN,QAAQ,CAACM,IAAT,EAA5B,IAA+CE,gBAAgB,CAACJ,KAAjB,OAA6BJ,QAAQ,CAACI,KAAT,EAAlG;IAEA,IAAIM,WAAW,GAAGvE,KAAK,CAACwE,YAAN,EAAlB;IAEA,OAAOhH,KAAK,CAACiH,aAAN,CACL,KADK,EAEL;MACEC,GAAG,EAAE,KAAKC,QADZ;MAEE3B,SAAS,EAAEG,OAFb;MAGEyB,KAAK,EAAE5E,KAAK,CAAC4E,KAHf;MAIEC,QAAQ,EAAE,GAJZ;MAKEC,SAAS,EAAE,KAAKA;IALlB,CAFK,EASL9E,KAAK,CAAC+E,aAAN,EATK,EAULvH,KAAK,CAACiH,aAAN,CACE,KADF,EAEE;MAAEzB,SAAS,EAAEV,SAAS,GAAG;IAAzB,CAFF,EAGEM,SAAS,IAAIpD,aAAa,CAAC,CAAD,CAA1B,IAAiCA,aAAa,CAAC,CAAD,CAA9C,GAAoDhC,KAAK,CAACiH,aAAN,CAClD,GADkD,EAElD;MACEO,IAAI,EAAE,QADR;MAEEC,KAAK,EAAEtC,MAAM,CAACuC,KAFhB;MAGEC,OAAO,EAAE,KAAKD;IAHhB,CAFkD,EAOlDnC,SAAS,IAAIvF,KAAK,CAACiH,aAAN,CAAoB,MAApB,EAA4B;MAAEzB,SAAS,EAAEV,SAAS,GAAG;IAAzB,CAA5B,CAPqC,CAApD,GAQI,IAXN,EAYE9E,KAAK,CAACiH,aAAN,CACE,KADF,EAEE;MACEzB,SAAS,EAAEV,SAAS,GAAG,aADzB;MAEE8C,YAAY,EAAEtC,IAAI,KAAK,MAAT,GAAkB,KAAKuC,gBAAvB,GAA0C1F,SAF1D;MAGE2F,YAAY,EAAExC,IAAI,KAAK,MAAT,GAAkB,KAAKyC,gBAAvB,GAA0C5F;IAH1D,CAFF,EAOEnC,KAAK,CAACiH,aAAN,CAAoB3G,YAApB,EAAkCV,QAAQ,CAAC,EAAD,EAAK4C,KAAL,EAAYoD,QAAZ,EAAsB;MAC9DxB,UAAU,EAAEA,UADkD;MAE9DhB,SAAS,EAAE,MAFmD;MAG9D4E,YAAY,EAAE,KAAKC,iBAH2C;MAI9DC,aAAa,EAAE,KAAKC,kBAJ0C;MAK9DC,MAAM,EAAE,KAAKC,SAAL,EALsD;MAM9D1F,KAAK,EAAEwD,UANuD;MAO9D9B,IAAI,EAAEA,IAAI,CAAC,CAAD,CAPoD;MAQ9DiE,WAAW,EAAEvC,YARiD;MAS9DwC,aAAa,EAAE,KAAKC,kBAT0C;MAU9DrF,aAAa,EAAE,KAAKsF,kBAV0C;MAW9DC,aAAa,EAAE,KAAKC,kBAX0C;MAY9DC,aAAa,EAAE,KAAKC,kBAZ0C;MAa9DC,aAAa,EAAE,KAAKtG,KAAL,CAAWsG,aAboC;MAc9D7D,UAAU,EAAEA,UAdkD;MAe9DvB,cAAc,EAAEA,cAAc,IAAIW,IAAI,CAAC,CAAD,CAAJ,KAAY,MAfgB;MAgB9D0E,UAAU,EAAE,IAhBkD;MAiB9DC,UAAU,EAAE,CAAClC,eAAD,IAAoB,KAAKmC,oBAAL,CAA0B5E,IAAI,CAAC,CAAD,CAA9B,CAjB8B;MAkB9DkB,SAAS,EAAEA;IAlBmD,CAAtB,CAA1C,CAPF,EA2BEvF,KAAK,CAACiH,aAAN,CACE,MADF,EAEE;MAAEzB,SAAS,EAAEV,SAAS,GAAG;IAAzB,CAFF,EAGEE,SAHF,CA3BF,EAgCEhF,KAAK,CAACiH,aAAN,CAAoB3G,YAApB,EAAkCV,QAAQ,CAAC,EAAD,EAAK4C,KAAL,EAAYoD,QAAZ,EAAsB;MAC9DxB,UAAU,EAAEA,UADkD;MAE9DhB,SAAS,EAAE,OAFmD;MAG9DgF,MAAM,EAAE,KAAKC,SAAL,EAHsD;MAI9Da,sBAAsB,EAAE,KAAKC,iBAAL,EAJsC;MAK9Db,WAAW,EAAEtC,YALiD;MAM9DrD,KAAK,EAAE0D,QANuD;MAO9DhC,IAAI,EAAEA,IAAI,CAAC,CAAD,CAPoD;MAQ9DkE,aAAa,EAAE,KAAKa,gBAR0C;MAS9DjG,aAAa,EAAE,KAAKkG,gBAT0C;MAU9DX,aAAa,EAAE,KAAKY,gBAV0C;MAW9DV,aAAa,EAAE,KAAKW,gBAX0C;MAY9DT,aAAa,EAAE,KAAKtG,KAAL,CAAWsG,aAZoC;MAa9D7D,UAAU,EAAEA,UAbkD;MAc9DvB,cAAc,EAAEA,cAAc,IAAIW,IAAI,CAAC,CAAD,CAAJ,KAAY,MAdgB;MAe9D2D,YAAY,EAAE,KAAKwB,eAf2C;MAgB9DtB,aAAa,EAAE,KAAKuB,gBAhB0C;MAiB9DV,UAAU,EAAE,CAACjC,eAAD,IAAoB,KAAKmC,oBAAL,CAA0B5E,IAAI,CAAC,CAAD,CAA9B,CAjB8B;MAkB9D2E,UAAU,EAAE,IAlBkD;MAmB9DzD,SAAS,EAAEA;IAnBmD,CAAtB,CAA1C,CAhCF,CAZF,EAkEEvF,KAAK,CAACiH,aAAN,CACE,KADF,EAEE;MAAEzB,SAAS,EAAEU;IAAb,CAFF,EAGEb,SAAS,IAAI7C,KAAK,CAACyC,UAAnB,IAAiCgB,YAAjC,IAAiDc,WAAjD,GAA+D/G,KAAK,CAACiH,aAAN,CAC7D,KAD6D,EAE7D;MAAEzB,SAAS,EAAEV,SAAS,GAAG;IAAzB,CAF6D,EAG7DiC,WAH6D,EAI7D1B,SAAS,GAAGrF,KAAK,CAACiH,aAAN,CAAoB1G,WAApB,EAAiCX,QAAQ,CAAC,EAAD,EAAK4C,KAAL,EAAY;MAC/DkH,QAAQ,EAAE9C,aADqD;MAE/DjE,KAAK,EAAEY,KAAK,CAACZ,KAAN,CAAY,CAAZ,CAFwD;MAG/DgH,OAAO,EAAE,KAAKA,OAHiD;MAI/DC,IAAI,EAAEzE,MAAM,CAAC0E;IAJkD,CAAZ,CAAzC,CAAH,GAKH,IATuD,EAU7DrH,KAAK,CAACyC,UAAN,GAAmBjF,KAAK,CAACiH,aAAN,CAAoBxG,gBAApB,EAAsCb,QAAQ,CAAC,EAAD,EAAK4C,KAAL,EAAY;MAC3EkB,cAAc,EAAEA,cAAc,IAAIW,IAAI,CAAC,CAAD,CAAJ,KAAY,MAAZ,IAAsBA,IAAI,CAAC,CAAD,CAAJ,KAAY,MADO;MAE3EyF,gBAAgB,EAAE,KAAKA,gBAFoD;MAG3EC,iBAAiB,EAAE,KAAKA,iBAHmD;MAI3EC,kBAAkB,EAAE,CAAC,KAAKC,gBAAL,EAAD,IAA4B7F,UAAU,CAAC3C;IAJgB,CAAZ,CAA9C,CAAnB,GAKM,IAfuD,EAgB7DwE,YAAY,GAAGjG,KAAK,CAACiH,aAAN,CAAoBzG,QAApB,EAA8BZ,QAAQ,CAAC,EAAD,EAAK4C,KAAL,EAAY;MAC/D0H,IAAI,EAAE,KAAKA,IADoD;MAE/DC,UAAU,EAAE,CAAC,KAAKC,oBAAL,CAA0BpI,aAA1B,CAAD,IAA6C,CAAC,KAAKiI,gBAAL,EAA9C,IAAyE7F,UAAU,CAAC3C;IAFjC,CAAZ,CAAtC,CAAH,GAGN,IAnBuD,CAA/D,GAoBI,IAvBN,CAlEF,CAVK,CAAP;EAuGD,CA5JD;;EA8JA,OAAOoC,aAAP;AACD,CA7MmB,CA6MlB7D,KAAK,CAACqK,SA7MY,CAApB;;AA+MAxG,aAAa,CAACyG,SAAd,GAA0B1K,QAAQ,CAAC,EAAD,EAAKe,QAAL,EAAe;EAC/CmE,SAAS,EAAE7E,SAAS,CAACsK,MAD0B;EAE/CxF,oBAAoB,EAAE9E,SAAS,CAACuK,GAFe;EAG/CxF,SAAS,EAAE/E,SAAS,CAACsK,MAH0B;EAI/C3H,YAAY,EAAE3C,SAAS,CAACuK,GAJuB;EAK/C7H,KAAK,EAAE1C,SAAS,CAACuK,GAL8B;EAM/CpG,UAAU,EAAEnE,SAAS,CAACuK,GANyB;EAO/CnG,IAAI,EAAEpE,SAAS,CAACwK,OAAV,CAAkBxK,SAAS,CAACyK,KAAV,CAAgB,CAAC,MAAD,EAAS,MAAT,EAAiB,OAAjB,EAA0B,MAA1B,EAAkC,QAAlC,CAAhB,CAAlB,CAPyC;EAQ/C5B,aAAa,EAAE7I,SAAS,CAAC0K,IARsB;EAS/C1F,UAAU,EAAEhF,SAAS,CAACuK,GATyB;EAU/CtF,MAAM,EAAEjF,SAAS,CAAC0K,IAV6B;EAW/CtF,SAAS,EAAEpF,SAAS,CAAC0K,IAX0B;EAY/CjI,oBAAoB,EAAEzC,SAAS,CAAC2K,KAZe;EAa/C5I,aAAa,EAAE/B,SAAS,CAAC2K,KAbsB;EAc/CV,IAAI,EAAEjK,SAAS,CAAC4K,IAd+B;EAe/CzF,SAAS,EAAEnF,SAAS,CAAC0K,IAf0B;EAgB/CxF,MAAM,EAAElF,SAAS,CAAC6K,MAhB6B;EAiB/CC,QAAQ,EAAE9K,SAAS,CAAC4K,IAjB2B;EAkB/ChF,QAAQ,EAAE5F,SAAS,CAAC4K,IAlB2B;EAmB/CnC,aAAa,EAAEzI,SAAS,CAAC4K,IAnBsB;EAoB/CG,aAAa,EAAE/K,SAAS,CAAC4K,IApBsB;EAqB/CjC,aAAa,EAAE3I,SAAS,CAAC4K,IArBsB;EAsB/CzC,MAAM,EAAEnI,SAAS,CAACgL,SAAV,CAAoB,CAAChL,SAAS,CAACsK,MAAX,EAAmBtK,SAAS,CAACwK,OAAV,CAAkBxK,SAAS,CAACsK,MAA5B,CAAnB,CAApB,CAtBuC;EAuB/CW,OAAO,EAAEjL,SAAS,CAAC4K,IAvB4B;EAwB/CvF,IAAI,EAAErF,SAAS,CAACuK,GAxB+B;EAyB/CW,YAAY,EAAElL,SAAS,CAAC4K,IAzBuB;EA0B/C7C,YAAY,EAAE/H,SAAS,CAAC4K,IA1BuB;EA2B/CtF,SAAS,EAAEtF,SAAS,CAACmL,IA3B0B;EA4B/C9D,SAAS,EAAErH,SAAS,CAAC4K;AA5B0B,CAAf,CAAlC;AA8BAhH,aAAa,CAACwH,YAAd,GAA6BzL,QAAQ,CAAC,EAAD,EAAKgB,WAAL,EAAkB;EACrD0E,IAAI,EAAE,MAD+C;EAErDN,SAAS,EAAE,GAF0C;EAGrDtC,oBAAoB,EAAE,EAH+B;EAIrDgG,aAAa,EAAEtH,IAJsC;EAKrD4J,aAAa,EAAE5J,IALsC;EAMrDwH,aAAa,EAAExH,IANsC;EAOrD4G,YAAY,EAAE5G,IAPuC;EAQrD+B,aAAa,EAAE/B,IARsC;EASrDiE,SAAS,EAAE,IAT0C;EAUrDyD,aAAa,EAAE;AAVsC,CAAlB,CAArC;;AAaA,IAAI7E,gBAAgB,GAAG,SAASA,gBAAT,GAA4B;EACjD,IAAIqH,MAAM,GAAG,IAAb;;EAEA,KAAKvD,gBAAL,GAAwB,YAAY;IAClC,IAAIuD,MAAM,CAACrB,gBAAP,EAAJ,EAA+B;MAC7BqB,MAAM,CAACC,oBAAP,CAA4BD,MAAM,CAAC/H,KAAP,CAAavB,aAAb,CAA2BgB,MAA3B,EAA5B;IACD;EACF,CAJD;;EAMA,KAAK6E,gBAAL,GAAwB,YAAY;IAClC,IAAIyD,MAAM,CAACrB,gBAAP,EAAJ,EAA+B;MAC7BqB,MAAM,CAACC,oBAAP,CAA4B,EAA5B;IACD;EACF,CAJD;;EAMA,KAAK1F,QAAL,GAAgB,UAAUlD,KAAV,EAAiB;IAC/B,IAAI2C,IAAI,GAAGgG,MAAM,CAAC9I,KAAP,CAAa8C,IAAxB;IACA,IAAIkG,MAAM,GAAGF,MAAM,CAAC/H,KAApB;IAAA,IACIvB,aAAa,GAAGwJ,MAAM,CAACxJ,aAD3B;IAAA,IAEIkC,iBAAiB,GAAGsH,MAAM,CAACtH,iBAF/B;IAAA,IAGIC,kBAAkB,GAAGqH,MAAM,CAACrH,kBAHhC;IAKA,IAAIsH,iBAAiB,GAAG,KAAK,CAA7B;;IACA,IAAInG,IAAI,KAAK,MAAb,EAAqB;MACnB,IAAI,CAACnB,kBAAL,EAAyB;QACvBtD,QAAQ,CAACqD,iBAAiB,CAAC,CAAD,CAAlB,EAAuBvB,KAAvB,CAAR;QACA8I,iBAAiB,GAAG,CAAC9I,KAAD,CAApB;MACD,CAHD,MAGO,IAAI2I,MAAM,CAAC7H,OAAP,CAAeU,kBAAf,EAAmCxB,KAAnC,IAA4C,CAAhD,EAAmD;QACxD9B,QAAQ,CAACqD,iBAAiB,CAAC,CAAD,CAAlB,EAAuBvB,KAAvB,CAAR;QACA8I,iBAAiB,GAAG,CAACtH,kBAAD,EAAqBxB,KAArB,CAApB;MACD,CAHM,MAGA;QACL9B,QAAQ,CAACqD,iBAAiB,CAAC,CAAD,CAAlB,EAAuBvB,KAAvB,CAAR;QACA9B,QAAQ,CAACqD,iBAAiB,CAAC,CAAD,CAAlB,EAAuBC,kBAAvB,CAAR;QACAsH,iBAAiB,GAAG,CAAC9I,KAAD,EAAQwB,kBAAR,CAApB;MACD;IACF,CAZD,MAYO,IAAImB,IAAI,KAAK,OAAb,EAAsB;MAC3BzE,QAAQ,CAACqD,iBAAiB,CAAC,CAAD,CAAlB,EAAuBvB,KAAvB,CAAR;MACA,IAAI0D,QAAQ,GAAGrE,aAAa,CAAC,CAAD,CAA5B;MACAyJ,iBAAiB,GAAGpF,QAAQ,IAAIiF,MAAM,CAAC7H,OAAP,CAAe4C,QAAf,EAAyB1D,KAAzB,IAAkC,CAA9C,GAAkD,CAACA,KAAD,EAAQ0D,QAAR,CAAlD,GAAsE,CAAC1D,KAAD,CAA1F;IACD,CAJM,MAIA;MACL;MACA,IAAIwD,UAAU,GAAGnE,aAAa,CAAC,CAAD,CAA9B;;MACA,IAAImE,UAAU,IAAImF,MAAM,CAAC7H,OAAP,CAAe0C,UAAf,EAA2BxD,KAA3B,KAAqC,CAAvD,EAA0D;QACxD9B,QAAQ,CAACqD,iBAAiB,CAAC,CAAD,CAAlB,EAAuBvB,KAAvB,CAAR;QACA8I,iBAAiB,GAAG,CAACtF,UAAD,EAAaxD,KAAb,CAApB;MACD,CAHD,MAGO;QACL9B,QAAQ,CAACqD,iBAAiB,CAAC,CAAD,CAAlB,EAAuBvB,KAAvB,CAAR;QACA8I,iBAAiB,GAAG,CAAC9I,KAAD,CAApB;MACD;IACF;;IAED2I,MAAM,CAAC3H,qBAAP,CAA6B8H,iBAA7B;EACD,CArCD;;EAuCA,KAAKnE,SAAL,GAAiB,UAAUoE,KAAV,EAAiB;IAChC,IAAIA,KAAK,CAACC,MAAN,CAAaC,QAAb,CAAsBC,WAAtB,OAAwC,OAA5C,EAAqD;MACnD;IACD;;IAED,IAAIC,OAAO,GAAGJ,KAAK,CAACI,OAApB;IAEA,IAAIC,OAAO,GAAGL,KAAK,CAACK,OAAN,IAAiBL,KAAK,CAACM,OAArC;IAEA,IAAIC,OAAO,GAAGX,MAAM,CAAC/H,KAArB;IAAA,IACIvB,aAAa,GAAGiK,OAAO,CAACjK,aAD5B;IAAA,IAEIoC,UAAU,GAAG6H,OAAO,CAAC7H,UAFzB;IAAA,IAGID,kBAAkB,GAAG8H,OAAO,CAAC9H,kBAHjC;IAAA,IAIIxB,KAAK,GAAGsJ,OAAO,CAACtJ,KAJpB;IAKA,IAAIuJ,MAAM,GAAGZ,MAAM,CAAC9I,KAApB;IAAA,IACI8E,SAAS,GAAG4E,MAAM,CAAC5E,SADvB;IAAA,IAEI6D,YAAY,GAAGe,MAAM,CAACf,YAF1B,CAdgC,CAkBhC;;IAEA,IAAIgB,gBAAgB,GAAG,SAASA,gBAAT,CAA0BtB,IAA1B,EAAgC;MACrD;MACA,IAAIuB,gBAAgB,GAAG,KAAK,CAA5B;MACA,IAAIC,aAAa,GAAG,KAAK,CAAzB;MACA,IAAIC,cAAc,GAAG,KAAK,CAA1B;;MAEA,IAAI,CAACnI,kBAAL,EAAyB;QACvBiI,gBAAgB,GAAGhI,UAAU,CAAC,CAAD,CAAV,IAAiBpC,aAAa,CAAC,CAAD,CAA9B,IAAqCW,KAAK,CAAC,CAAD,CAA1C,IAAiDzC,MAAM,EAA1E;QACAmM,aAAa,GAAGxB,IAAI,CAACuB,gBAAD,CAApB;QACAE,cAAc,GAAG,CAACD,aAAD,CAAjB;;QACAf,MAAM,CAACC,oBAAP,CAA4Be,cAA5B;MACD,CALD,MAKO;QACL,IAAIlI,UAAU,CAAC3C,MAAX,KAAsB,CAA1B,EAA6B;UAC3B2K,gBAAgB,GAAGhI,UAAU,CAAC,CAAD,CAAV,CAAchC,KAAd,EAAnB;UACAiK,aAAa,GAAGxB,IAAI,CAACuB,gBAAD,CAApB;UACAE,cAAc,GAAGhB,MAAM,CAACxF,UAAP,CAAkBuG,aAAlB,CAAjB;QACD,CAJD,MAIO;UACLD,gBAAgB,GAAGhI,UAAU,CAAC,CAAD,CAAV,CAAcmI,MAAd,CAAqBpI,kBAArB,EAAyC,KAAzC,IAAkDC,UAAU,CAAC,CAAD,CAA5D,GAAkEA,UAAU,CAAC,CAAD,CAA/F;UACAiI,aAAa,GAAGxB,IAAI,CAACuB,gBAAD,CAApB;UACAE,cAAc,GAAGhB,MAAM,CAACxF,UAAP,CAAkBuG,aAAlB,CAAjB;QACD;MACF,CArBoD,CAuBrD;;;MACA,IAAIC,cAAc,CAAC7K,MAAf,IAAyB,CAA7B,EAAgC;QAC9B,IAAI+K,IAAI,GAAGF,cAAc,CAACG,IAAf,CAAoB,UAAUC,EAAV,EAAc;UAC3C,OAAO,CAACvL,YAAY,CAACwB,KAAD,EAAQ+J,EAAR,EAAY,OAAZ,CAApB;QACD,CAFU,CAAX;;QAGA,IAAIF,IAAJ,EAAU;UACR,IAAIG,QAAQ,GAAGL,cAAc,CAACM,KAAf,GAAuBC,IAAvB,CAA4B,UAAUC,EAAV,EAAcC,EAAd,EAAkB;YAC3D,OAAOD,EAAE,CAACE,OAAH,KAAeD,EAAE,CAACC,OAAH,EAAtB;UACD,CAFc,CAAf;;UAGA,IAAIL,QAAQ,CAAC,CAAD,CAAR,CAAYJ,MAAZ,CAAmBI,QAAQ,CAAC,CAAD,CAA3B,EAAgC,OAAhC,CAAJ,EAA8C;YAC5CA,QAAQ,CAAC,CAAD,CAAR,GAAcA,QAAQ,CAAC,CAAD,CAAR,CAAYvK,KAAZ,GAAoBE,GAApB,CAAwB,CAAxB,EAA2B,OAA3B,CAAd;UACD;;UACDgJ,MAAM,CAAC2B,eAAP,CAAuBN,QAAvB;QACD;MACF,CAbD,MAaO,IAAIL,cAAc,CAAC7K,MAAf,KAA0B,CAA9B,EAAiC;QACtC;QACA,IAAIyL,aAAa,GAAGvK,KAAK,CAACwK,SAAN,CAAgB,UAAUC,IAAV,EAAgB;UAClD,OAAOA,IAAI,CAACb,MAAL,CAAYH,gBAAZ,EAA8B,OAA9B,CAAP;QACD,CAFmB,CAApB;QAGA,IAAIc,aAAa,KAAK,CAAC,CAAvB,EAA0BA,aAAa,GAAG,CAAhB;;QAE1B,IAAIvK,KAAK,CAACjB,KAAN,CAAY,UAAU0L,IAAV,EAAgB;UAC9B,OAAO,CAACA,IAAI,CAACb,MAAL,CAAYF,aAAZ,EAA2B,OAA3B,CAAR;QACD,CAFG,CAAJ,EAEI;UACF,IAAIgB,SAAS,GAAG1K,KAAK,CAACiK,KAAN,EAAhB;;UACAS,SAAS,CAACH,aAAD,CAAT,GAA2Bb,aAAa,CAACjK,KAAd,EAA3B;;UACAkJ,MAAM,CAAC2B,eAAP,CAAuBI,SAAvB;QACD;MACF;;MAED3B,KAAK,CAAC4B,cAAN;MAEA,OAAOjB,aAAP;IACD,CAxDD;;IA0DA,QAAQP,OAAR;MACE,KAAKzL,OAAO,CAACkN,IAAb;QACEpB,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;UAC/B,OAAOpM,MAAM,CAACoM,IAAD,EAAO,CAAP,EAAU,OAAV,CAAb;QACD,CAFe,CAAhB;QAGA;;MACF,KAAK/M,OAAO,CAACmN,EAAb;QACErB,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;UAC/B,OAAOpM,MAAM,CAACoM,IAAD,EAAO,CAAC,CAAR,EAAW,OAAX,CAAb;QACD,CAFe,CAAhB;QAGA;;MACF,KAAK/M,OAAO,CAACoN,IAAb;QACE,IAAI1B,OAAJ,EAAa;UACXI,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;YAC/B,OAAOpM,MAAM,CAACoM,IAAD,EAAO,CAAC,CAAR,EAAW,OAAX,CAAb;UACD,CAFe,CAAhB;QAGD,CAJD,MAIO;UACLjB,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;YAC/B,OAAOpM,MAAM,CAACoM,IAAD,EAAO,CAAC,CAAR,EAAW,MAAX,CAAb;UACD,CAFe,CAAhB;QAGD;;QACD;;MACF,KAAK/M,OAAO,CAACqN,KAAb;QACE,IAAI3B,OAAJ,EAAa;UACXI,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;YAC/B,OAAOpM,MAAM,CAACoM,IAAD,EAAO,CAAP,EAAU,OAAV,CAAb;UACD,CAFe,CAAhB;QAGD,CAJD,MAIO;UACLjB,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;YAC/B,OAAOpM,MAAM,CAACoM,IAAD,EAAO,CAAP,EAAU,MAAV,CAAb;UACD,CAFe,CAAhB;QAGD;;QACD;;MACF,KAAK/M,OAAO,CAACsN,IAAb;QACExB,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;UAC/B,OAAOnM,YAAY,CAACmM,IAAD,CAAnB;QACD,CAFe,CAAhB;QAGA;;MACF,KAAK/M,OAAO,CAACuN,GAAb;QACEzB,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;UAC/B,OAAOlM,UAAU,CAACkM,IAAD,CAAjB;QACD,CAFe,CAAhB;QAGA;;MACF,KAAK/M,OAAO,CAACwN,SAAb;QACE1B,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;UAC/B,OAAOpM,MAAM,CAACoM,IAAD,EAAO,CAAP,EAAU,OAAV,CAAb;QACD,CAFe,CAAhB;QAGA;;MACF,KAAK/M,OAAO,CAACyN,OAAb;QACE3B,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;UAC/B,OAAOpM,MAAM,CAACoM,IAAD,EAAO,CAAC,CAAR,EAAW,OAAX,CAAb;QACD,CAFe,CAAhB;QAGA;;MACF,KAAK/M,OAAO,CAAC0N,KAAb;QACE;UACE,IAAIC,SAAS,GAAG,KAAK,CAArB;;UACA,IAAI5J,UAAU,CAAC3C,MAAX,KAAsB,CAA1B,EAA6B;YAC3BuM,SAAS,GAAG7B,gBAAgB,CAAC,UAAUiB,IAAV,EAAgB;cAC3C,OAAOA,IAAP;YACD,CAF2B,CAA5B;UAGD,CAJD,MAIO,IAAIhJ,UAAU,CAAC3C,MAAX,KAAsB,CAA1B,EAA6B;YAClCuM,SAAS,GAAG5J,UAAU,CAAC,CAAD,CAAtB;UACD,CAFM,MAEA;YACL4J,SAAS,GAAG5J,UAAU,CAAC,CAAD,CAAV,CAAcmI,MAAd,CAAqBpI,kBAArB,EAAyC,KAAzC,IAAkDC,UAAU,CAAC,CAAD,CAA5D,GAAkEA,UAAU,CAAC,CAAD,CAAxF;UACD;;UACD,IAAI4J,SAAS,KAAK,CAAC7C,YAAD,IAAiB,CAACA,YAAY,CAAC6C,SAAD,CAAnC,CAAb,EAA8D;YAC5D1C,MAAM,CAACzF,QAAP,CAAgBmI,SAAhB;UACD;;UACDtC,KAAK,CAAC4B,cAAN;UACA;QACD;;MACH;QACE,IAAIhG,SAAJ,EAAe;UACbA,SAAS,CAACoE,KAAD,CAAT;QACD;;IA1EL;EA4ED,CA1JD;;EA4JA,KAAK5F,UAAL,GAAkB,UAAUnD,KAAV,EAAiB;IACjC,IAAIyB,UAAU,GAAG,EAAjB;IACA,IAAI6J,OAAO,GAAG3C,MAAM,CAAC/H,KAArB;IAAA,IACIvB,aAAa,GAAGiM,OAAO,CAACjM,aAD5B;IAAA,IAEImC,kBAAkB,GAAG8J,OAAO,CAAC9J,kBAFjC;IAGA,IAAImB,IAAI,GAAGgG,MAAM,CAAC9I,KAAP,CAAa8C,IAAxB;;IAEA,IAAIA,IAAI,KAAK,OAAT,IAAoBtD,aAAa,CAAC,CAAD,CAArC,EAA0C;MACxCoC,UAAU,GAAGkH,MAAM,CAAC7H,OAAP,CAAed,KAAf,EAAsBX,aAAa,CAAC,CAAD,CAAnC,IAA0C,CAA1C,GAA8C,CAACW,KAAD,EAAQX,aAAa,CAAC,CAAD,CAArB,CAA9C,GAA0E,CAACW,KAAD,CAAvF;IACD,CAFD,MAEO,IAAI2C,IAAI,KAAK,KAAT,IAAkBtD,aAAa,CAAC,CAAD,CAAnC,EAAwC;MAC7CoC,UAAU,GAAGkH,MAAM,CAAC7H,OAAP,CAAed,KAAf,EAAsBX,aAAa,CAAC,CAAD,CAAnC,IAA0C,CAA1C,GAA8C,CAACA,aAAa,CAAC,CAAD,CAAd,EAAmBW,KAAnB,CAA9C,GAA0E,EAAvF;IACD,CAFM,MAEA;MACL,IAAI,CAACwB,kBAAL,EAAyB;QACvB,IAAImH,MAAM,CAAC/H,KAAP,CAAaa,UAAb,CAAwB3C,MAA5B,EAAoC;UAClC6J,MAAM,CAAC4C,QAAP,CAAgB;YAAE9J,UAAU,EAAE;UAAd,CAAhB;QACD;;QACD,OAAOA,UAAP;MACD;;MACDA,UAAU,GAAGkH,MAAM,CAAC7H,OAAP,CAAed,KAAf,EAAsBwB,kBAAtB,IAA4C,CAA5C,GAAgD,CAACxB,KAAD,EAAQwB,kBAAR,CAAhD,GAA8E,CAACA,kBAAD,EAAqBxB,KAArB,CAA3F;IACD;;IACD2I,MAAM,CAACC,oBAAP,CAA4BnH,UAA5B;;IAEA,OAAOA,UAAP;EACD,CAvBD;;EAyBA,KAAKuF,OAAL,GAAe,YAAY;IACzB,IAAIxD,UAAU,GAAGrF,YAAY,CAACwK,MAAM,CAAC/H,KAAP,CAAaZ,KAAb,CAAmB,CAAnB,CAAD,CAA7B;IACA,IAAI0D,QAAQ,GAAGF,UAAU,CAAC/D,KAAX,GAAmBE,GAAnB,CAAuB,CAAvB,EAA0B,QAA1B,CAAf;;IACAgJ,MAAM,CAAC4C,QAAP,CAAgB;MAAEvL,KAAK,EAAE,CAACwD,UAAD,EAAaE,QAAb;IAAT,CAAhB;EACD,CAJD;;EAMA,KAAKyD,gBAAL,GAAwB,YAAY;IAClCwB,MAAM,CAAC4C,QAAP,CAAgB;MACdxK,cAAc,EAAE;IADF,CAAhB;EAGD,CAJD;;EAMA,KAAKqG,iBAAL,GAAyB,YAAY;IACnCuB,MAAM,CAAC4C,QAAP,CAAgB;MACdxK,cAAc,EAAE;IADF,CAAhB;EAGD,CAJD;;EAMA,KAAKwG,IAAL,GAAY,YAAY;IACtB,IAAIlI,aAAa,GAAGsJ,MAAM,CAAC/H,KAAP,CAAavB,aAAjC;;IAEA,IAAIsJ,MAAM,CAAClB,oBAAP,CAA4BpI,aAA5B,CAAJ,EAAgD;MAC9CsJ,MAAM,CAAC9I,KAAP,CAAa0H,IAAb,CAAkBoB,MAAM,CAAC/H,KAAP,CAAavB,aAA/B;IACD;EACF,CAND;;EAQA,KAAKwG,kBAAL,GAA0B,YAAY;IACpC,KAAK,IAAI2F,IAAI,GAAGC,SAAS,CAAC3M,MAArB,EAA6B4M,KAAK,GAAG9M,KAAK,CAAC4M,IAAD,CAA1C,EAAkDG,IAAI,GAAG,CAA9D,EAAiEA,IAAI,GAAGH,IAAxE,EAA8EG,IAAI,EAAlF,EAAsF;MACpFD,KAAK,CAACC,IAAD,CAAL,GAAcF,SAAS,CAACE,IAAD,CAAvB;IACD;;IAED,IAAIC,IAAI,GAAG,CAAC,MAAD,EAASvL,MAAT,CAAgBqL,KAAhB,CAAX;IACA,OAAOlL,aAAa,CAACqL,KAAd,CAAoBlD,MAApB,EAA4BiD,IAA5B,CAAP;EACD,CAPD;;EASA,KAAKnF,gBAAL,GAAwB,YAAY;IAClC,KAAK,IAAIqF,KAAK,GAAGL,SAAS,CAAC3M,MAAtB,EAA8B4M,KAAK,GAAG9M,KAAK,CAACkN,KAAD,CAA3C,EAAoDC,KAAK,GAAG,CAAjE,EAAoEA,KAAK,GAAGD,KAA5E,EAAmFC,KAAK,EAAxF,EAA4F;MAC1FL,KAAK,CAACK,KAAD,CAAL,GAAeN,SAAS,CAACM,KAAD,CAAxB;IACD;;IAED,IAAIH,IAAI,GAAG,CAAC,OAAD,EAAUvL,MAAV,CAAiBqL,KAAjB,CAAX;IACA,OAAOlL,aAAa,CAACqL,KAAd,CAAoBlD,MAApB,EAA4BiD,IAA5B,CAAP;EACD,CAPD;;EASA,KAAK9F,kBAAL,GAA0B,UAAU9F,KAAV,EAAiB;IACzC,IAAI4L,IAAI,GAAG,CAAC,MAAD,EAAS5L,KAAT,EAAgB;MAAEiB,MAAM,EAAE;IAAV,CAAhB,CAAX;IACA,OAAOT,aAAa,CAACqL,KAAd,CAAoBlD,MAApB,EAA4BiD,IAA5B,CAAP;EACD,CAHD;;EAKA,KAAKlF,gBAAL,GAAwB,UAAU1G,KAAV,EAAiB;IACvC,IAAI4L,IAAI,GAAG,CAAC,OAAD,EAAU5L,KAAV,EAAiB;MAAEiB,MAAM,EAAE;IAAV,CAAjB,CAAX;IACA,OAAOT,aAAa,CAACqL,KAAd,CAAoBlD,MAApB,EAA4BiD,IAA5B,CAAP;EACD,CAHD;;EAKA,KAAK5F,kBAAL,GAA0B,UAAUgG,SAAV,EAAqB;IAC7C,IAAIhM,KAAK,GAAG,GAAGK,MAAH,CAAUsI,MAAM,CAAC/H,KAAP,CAAaZ,KAAvB,CAAZ;IACAA,KAAK,CAAC,CAAD,CAAL,GAAWgM,SAAX;IACA,OAAOrD,MAAM,CAAC2B,eAAP,CAAuBtK,KAAvB,CAAP;EACD,CAJD;;EAMA,KAAK2G,gBAAL,GAAwB,UAAUsF,UAAV,EAAsB;IAC5C,IAAIjM,KAAK,GAAG,GAAGK,MAAH,CAAUsI,MAAM,CAAC/H,KAAP,CAAaZ,KAAvB,CAAZ;IACAA,KAAK,CAAC,CAAD,CAAL,GAAWiM,UAAX;IACA,OAAOtD,MAAM,CAAC2B,eAAP,CAAuBtK,KAAvB,CAAP;EACD,CAJD;;EAMA,KAAKkG,kBAAL,GAA0B,UAAUlG,KAAV,EAAiB0B,IAAjB,EAAuB;IAC/C,IAAI7B,KAAK,GAAG8I,MAAM,CAAC9I,KAAnB;IAAA,IACIe,KAAK,GAAG+H,MAAM,CAAC/H,KADnB;IAGA,IAAIsL,OAAO,GAAG,CAACxK,IAAD,EAAOd,KAAK,CAACc,IAAN,CAAW,CAAX,CAAP,CAAd;IACA,IAAII,QAAQ,GAAG;MACbH,kBAAkB,EAAE;IADP,CAAf;;IAGA,IAAI,EAAE,UAAU9B,KAAZ,CAAJ,EAAwB;MACtBiC,QAAQ,CAACJ,IAAT,GAAgBwK,OAAhB;IACD;;IACDvD,MAAM,CAAC4C,QAAP,CAAgBzJ,QAAhB;;IACA,IAAIkI,QAAQ,GAAG,CAAChK,KAAK,IAAIY,KAAK,CAACZ,KAAN,CAAY,CAAZ,CAAV,EAA0BY,KAAK,CAACZ,KAAN,CAAY,CAAZ,CAA1B,CAAf;IACAH,KAAK,CAACoG,aAAN,CAAoB+D,QAApB,EAA8BkC,OAA9B;EACD,CAdD;;EAgBA,KAAKtF,gBAAL,GAAwB,UAAU5G,KAAV,EAAiB0B,IAAjB,EAAuB;IAC7C,IAAI7B,KAAK,GAAG8I,MAAM,CAAC9I,KAAnB;IAAA,IACIe,KAAK,GAAG+H,MAAM,CAAC/H,KADnB;IAGA,IAAIsL,OAAO,GAAG,CAACtL,KAAK,CAACc,IAAN,CAAW,CAAX,CAAD,EAAgBA,IAAhB,CAAd;IACA,IAAII,QAAQ,GAAG;MACbH,kBAAkB,EAAE;IADP,CAAf;;IAGA,IAAI,EAAE,UAAU9B,KAAZ,CAAJ,EAAwB;MACtBiC,QAAQ,CAACJ,IAAT,GAAgBwK,OAAhB;IACD;;IACDvD,MAAM,CAAC4C,QAAP,CAAgBzJ,QAAhB;;IACA,IAAIkI,QAAQ,GAAG,CAACpJ,KAAK,CAACZ,KAAN,CAAY,CAAZ,CAAD,EAAiBA,KAAK,IAAIY,KAAK,CAACZ,KAAN,CAAY,CAAZ,CAA1B,CAAf;IACAH,KAAK,CAACoG,aAAN,CAAoB+D,QAApB,EAA8BkC,OAA9B;EACD,CAdD;;EAgBA,KAAKzI,aAAL,GAAqB,YAAY;IAC/B,IAAI0I,OAAO,GAAGxD,MAAM,CAAC/H,KAArB;IAAA,IACIvB,aAAa,GAAG8M,OAAO,CAAC9M,aAD5B;IAAA,IAEI0B,cAAc,GAAGoL,OAAO,CAACpL,cAF7B;IAAA,IAGIf,KAAK,GAAGmM,OAAO,CAACnM,KAHpB;IAAA,IAII0B,IAAI,GAAGyK,OAAO,CAACzK,IAJnB;IAAA,IAKIC,kBAAkB,GAAGwK,OAAO,CAACxK,kBALjC;IAOA,IAAI6B,UAAU,GAAGxD,KAAK,CAAC,CAAD,CAAtB,CAR+B,CAS/B;;IACA,IAAIX,aAAa,CAAC,CAAD,CAAb,IAAoBsJ,MAAM,CAAC9I,KAAP,CAAayC,UAArC,EAAiD;MAC/CkB,UAAU,GAAGA,UAAU,CAAC/D,KAAX,EAAb;MACAvB,QAAQ,CAACmB,aAAa,CAAC,CAAD,CAAd,EAAmBmE,UAAnB,CAAR;IACD;;IACD,IAAIzC,cAAc,IAAI1B,aAAa,CAAC,CAAD,CAAnC,EAAwC;MACtCmE,UAAU,GAAGnE,aAAa,CAAC,CAAD,CAA1B;IACD,CAhB8B,CAkB/B;;;IACA,IAAIsC,kBAAkB,KAAK,KAAvB,IAAgCD,IAAI,CAAC,CAAD,CAAJ,KAAY,MAA5C,IAAsDA,IAAI,CAAC,CAAD,CAAJ,KAAY,MAAlE,IAA4E8B,UAAU,CAACoG,MAAX,CAAkB5J,KAAK,CAAC,CAAD,CAAvB,EAA4B,OAA5B,CAAhF,EAAsH;MACpHwD,UAAU,GAAGA,UAAU,CAAC/D,KAAX,GAAmBC,QAAnB,CAA4B,CAA5B,EAA+B,OAA/B,CAAb;IACD;;IAED,OAAO8D,UAAP;EACD,CAxBD;;EA0BA,KAAKG,WAAL,GAAmB,YAAY;IAC7B,IAAIyI,OAAO,GAAGzD,MAAM,CAAC/H,KAArB;IAAA,IACIZ,KAAK,GAAGoM,OAAO,CAACpM,KADpB;IAAA,IAEIX,aAAa,GAAG+M,OAAO,CAAC/M,aAF5B;IAAA,IAGI0B,cAAc,GAAGqL,OAAO,CAACrL,cAH7B;IAAA,IAIIW,IAAI,GAAG0K,OAAO,CAAC1K,IAJnB;IAAA,IAKIC,kBAAkB,GAAGyK,OAAO,CAACzK,kBALjC;IAOA,IAAI+B,QAAQ,GAAG1D,KAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAAL,CAASP,KAAT,EAAX,GAA8BO,KAAK,CAAC,CAAD,CAAL,CAASP,KAAT,GAAiBE,GAAjB,CAAqB,CAArB,EAAwB,OAAxB,CAA7C,CAR6B,CAS7B;;IACA,IAAIN,aAAa,CAAC,CAAD,CAAb,IAAoBsJ,MAAM,CAAC9I,KAAP,CAAayC,UAArC,EAAiD;MAC/CpE,QAAQ,CAACmB,aAAa,CAAC,CAAD,CAAd,EAAmBqE,QAAnB,CAAR;IACD;;IACD,IAAI3C,cAAJ,EAAoB;MAClB2C,QAAQ,GAAGrE,aAAa,CAAC,CAAD,CAAb,GAAmBA,aAAa,CAAC,CAAD,CAAhC,GAAsCsJ,MAAM,CAAClF,aAAP,EAAjD;IACD,CAf4B,CAiB7B;;;IACA,IAAI,CAAC1C,cAAD,IAAmBY,kBAAkB,KAAK,KAA1C,IAAmDD,IAAI,CAAC,CAAD,CAAJ,KAAY,MAA/D,IAAyEA,IAAI,CAAC,CAAD,CAAJ,KAAY,MAArF,IAA+FgC,QAAQ,CAACkG,MAAT,CAAgB5J,KAAK,CAAC,CAAD,CAArB,EAA0B,OAA1B,CAAnG,EAAuI;MACrI0D,QAAQ,GAAGA,QAAQ,CAACjE,KAAT,GAAiBE,GAAjB,CAAqB,CAArB,EAAwB,OAAxB,CAAX;IACD;;IAED,OAAO+D,QAAP;EACD,CAvBD;;EAyBA,KAAK8C,iBAAL,GAAyB,YAAY;IACnC,IAAI6F,OAAO,GAAG1D,MAAM,CAAC/H,KAArB;IAAA,IACIvB,aAAa,GAAGgN,OAAO,CAAChN,aAD5B;IAAA,IAEIW,KAAK,GAAGqM,OAAO,CAACrM,KAFpB;IAGA,IAAIqF,YAAY,GAAGsD,MAAM,CAAC9I,KAAP,CAAawF,YAAhC;IAEA,IAAIiH,uBAAuB,GAAGjH,YAAY,CAAChG,aAAD,EAAgB,KAAhB,CAAZ,IAAsC,EAApE;IACA,IAAImE,UAAU,GAAGnE,aAAa,IAAIA,aAAa,CAAC,CAAD,CAA9B,IAAqCW,KAAK,CAAC,CAAD,CAAL,CAASP,KAAT,EAAtD,CAPmC,CAQnC;IACA;;IACA,IAAI,CAACJ,aAAa,CAAC,CAAD,CAAd,IAAqBmE,UAAU,CAACoG,MAAX,CAAkBvK,aAAa,CAAC,CAAD,CAA/B,EAAoC,KAApC,CAAzB,EAAqE;MACnE,IAAIkN,KAAK,GAAG/I,UAAU,CAACgJ,IAAX,EAAZ;MACA,IAAIC,OAAO,GAAGjJ,UAAU,CAACkJ,MAAX,EAAd;MACA,IAAIC,MAAM,GAAGnJ,UAAU,CAACmJ,MAAX,EAAb;MACA,IAAIC,cAAc,GAAGN,uBAAuB,CAACO,aAA7C;MAAA,IACIC,gBAAgB,GAAGR,uBAAuB,CAACS,eAD/C;MAAA,IAEIC,gBAAgB,GAAGV,uBAAuB,CAACW,eAF/C;MAIA,IAAIC,kBAAkB,GAAGJ,gBAAgB,GAAGA,gBAAgB,EAAnB,GAAwB,EAAjE;MACA,IAAIK,kBAAkB,GAAGH,gBAAgB,GAAGA,gBAAgB,EAAnB,GAAwB,EAAjE;MACAJ,cAAc,GAAGzM,eAAe,CAACoM,KAAD,EAAQK,cAAR,CAAhC;MACAE,gBAAgB,GAAG3M,eAAe,CAACsM,OAAD,EAAUK,gBAAV,CAAlC;MACAE,gBAAgB,GAAG7M,eAAe,CAACwM,MAAD,EAASK,gBAAT,CAAlC;MACA,OAAO;QACLH,aAAa,EAAE,SAASA,aAAT,GAAyB;UACtC,OAAOD,cAAP;QACD,CAHI;QAILG,eAAe,EAAE,SAASA,eAAT,CAAyBP,IAAzB,EAA+B;UAC9C,IAAIA,IAAI,KAAKD,KAAb,EAAoB;YAClB,OAAOO,gBAAP;UACD;;UACD,OAAOI,kBAAP;QACD,CATI;QAULD,eAAe,EAAE,SAASA,eAAT,CAAyBT,IAAzB,EAA+BE,MAA/B,EAAuC;UACtD,IAAIF,IAAI,KAAKD,KAAT,IAAkBG,MAAM,KAAKD,OAAjC,EAA0C;YACxC,OAAOO,gBAAP;UACD;;UACD,OAAOG,kBAAP;QACD;MAfI,CAAP;IAiBD;;IACD,OAAOb,uBAAP;EACD,CA1CD;;EA4CA,KAAK7E,oBAAL,GAA4B,UAAUpI,aAAV,EAAyB;IACnD,OAAOjB,aAAa,CAACiB,aAAa,CAAC,CAAD,CAAd,EAAmBsJ,MAAM,CAAC9I,KAAP,CAAa2I,YAAhC,EAA8CG,MAAM,CAACrD,iBAArD,CAAb,IAAwFlH,aAAa,CAACiB,aAAa,CAAC,CAAD,CAAd,EAAmBsJ,MAAM,CAAC9I,KAAP,CAAa2I,YAAhC,EAA8CG,MAAM,CAAC9B,eAArD,CAA5G;EACD,CAFD;;EAIA,KAAKP,oBAAL,GAA4B,UAAU5E,IAAV,EAAgB;IAC1C,OAAO,CAAC,OAAD,EAAU,MAAV,EAAkB,QAAlB,EAA4BpB,OAA5B,CAAoCoB,IAApC,IAA4C,CAAC,CAApD;EACD,CAFD;;EAIA,KAAK4F,gBAAL,GAAwB,YAAY;IAClC,IAAIjI,aAAa,GAAGsJ,MAAM,CAAC/H,KAAP,CAAavB,aAAjC;IAEA,OAAO,CAAC,CAACA,aAAa,CAAC,CAAD,CAAf,IAAsB,CAAC,CAACA,aAAa,CAAC,CAAD,CAA5C;EACD,CAJD;;EAMA,KAAKyB,OAAL,GAAe,UAAUsM,EAAV,EAAcC,EAAd,EAAkB;IAC/B,IAAI1E,MAAM,CAAC9I,KAAP,CAAayC,UAAjB,EAA6B;MAC3B,OAAO8K,EAAE,CAACE,IAAH,CAAQD,EAAR,CAAP;IACD;;IACD,OAAOD,EAAE,CAACE,IAAH,CAAQD,EAAR,EAAY,MAAZ,CAAP;EACD,CALD;;EAOA,KAAKrM,qBAAL,GAA6B,UAAU3B,aAAV,EAAyBkO,MAAzB,EAAiC7M,KAAjC,EAAwC;IACnE,IAAI4B,UAAU,GAAGqG,MAAM,CAAC9I,KAAP,CAAayC,UAA9B;IACA,IAAIf,iBAAiB,GAAGoH,MAAM,CAAC/H,KAAP,CAAaW,iBAArC;;IAEA,IAAIe,UAAU,IAAIA,UAAU,CAACzC,KAAX,CAAiBI,YAAnC,EAAiD;MAC/C,IAAIuN,sBAAsB,GAAGlL,UAAU,CAACzC,KAAX,CAAiBI,YAA9C;;MACA,IAAI,CAACsB,iBAAiB,CAAC,CAAD,CAAlB,IAAyBlC,aAAa,CAAC,CAAD,CAA1C,EAA+C;QAC7CnB,QAAQ,CAACsP,sBAAsB,CAAC,CAAD,CAAvB,EAA4BnO,aAAa,CAAC,CAAD,CAAzC,CAAR;MACD;;MACD,IAAI,CAACkC,iBAAiB,CAAC,CAAD,CAAlB,IAAyBlC,aAAa,CAAC,CAAD,CAA1C,EAA+C;QAC7CnB,QAAQ,CAACsP,sBAAsB,CAAC,CAAD,CAAvB,EAA4BnO,aAAa,CAAC,CAAD,CAAzC,CAAR;MACD;IACF;;IAED,IAAI,EAAE,mBAAmBsJ,MAAM,CAAC9I,KAA5B,CAAJ,EAAwC;MACtC8I,MAAM,CAAC4C,QAAP,CAAgB;QACdlM,aAAa,EAAEA;MADD,CAAhB;IAGD,CAlBkE,CAoBnE;;;IACA,IAAI,CAACsJ,MAAM,CAAC/H,KAAP,CAAavB,aAAb,CAA2B,CAA3B,CAAD,IAAkC,CAACsJ,MAAM,CAAC/H,KAAP,CAAavB,aAAb,CAA2B,CAA3B,CAAvC,EAAsE;MACpE,IAAImE,UAAU,GAAGnE,aAAa,CAAC,CAAD,CAAb,IAAoB9B,MAAM,EAA3C;MACA,IAAImG,QAAQ,GAAGrE,aAAa,CAAC,CAAD,CAAb,IAAoBmE,UAAU,CAAC/D,KAAX,GAAmBE,GAAnB,CAAuB,CAAvB,EAA0B,QAA1B,CAAnC;;MACAgJ,MAAM,CAAC4C,QAAP,CAAgB;QACdlM,aAAa,EAAEA,aADD;QAEdW,KAAK,EAAEZ,yBAAyB,CAAC,CAACoE,UAAD,EAAaE,QAAb,CAAD;MAFlB,CAAhB;IAID;;IAED,IAAIrE,aAAa,CAAC,CAAD,CAAb,IAAoB,CAACA,aAAa,CAAC,CAAD,CAAtC,EAA2C;MACzCsJ,MAAM,CAAC4C,QAAP,CAAgB;QAAE/J,kBAAkB,EAAEnC,aAAa,CAAC,CAAD;MAAnC,CAAhB;;MACAsJ,MAAM,CAACC,oBAAP,CAA4BvJ,aAAa,CAACgB,MAAd,EAA5B;IACD;;IACDsI,MAAM,CAAC9I,KAAP,CAAauI,QAAb,CAAsB/I,aAAtB;;IACA,IAAIkO,MAAM,IAAIlO,aAAa,CAAC,CAAD,CAAb,IAAoBA,aAAa,CAAC,CAAD,CAA/C,EAAoD;MAClDsJ,MAAM,CAAC4C,QAAP,CAAgB;QACdhK,iBAAiB,EAAElC,aADL;QAEdmC,kBAAkB,EAAE;MAFN,CAAhB;;MAIAmH,MAAM,CAACC,oBAAP,CAA4B,EAA5B;;MACAD,MAAM,CAAC9I,KAAP,CAAaqD,QAAb,CAAsB7D,aAAtB,EAAqCqB,KAArC;IACD;EACF,CA3CD;;EA6CA,KAAK4J,eAAL,GAAuB,UAAUtK,KAAV,EAAiB;IACtC,IAAIH,KAAK,GAAG8I,MAAM,CAAC9I,KAAnB;;IACA,IAAI,EAAE,WAAWA,KAAb,CAAJ,EAAyB;MACvB8I,MAAM,CAAC4C,QAAP,CAAgB;QACdvL,KAAK,EAAEA;MADO,CAAhB;IAGD;;IACDH,KAAK,CAACkG,aAAN,CAAoB/F,KAApB;EACD,CARD;;EAUA,KAAK4I,oBAAL,GAA4B,UAAUnH,UAAV,EAAsB;IAChD,IAAI5B,KAAK,GAAG8I,MAAM,CAAC9I,KAAnB;;IACA,IAAI,EAAE,gBAAgBA,KAAlB,CAAJ,EAA8B;MAC5B8I,MAAM,CAAC4C,QAAP,CAAgB;QAAE9J,UAAU,EAAEA;MAAd,CAAhB;IACD;;IACD5B,KAAK,CAACwI,aAAN,CAAoB5G,UAApB;EACD,CAND;;EAQA,KAAKsD,KAAL,GAAa,YAAY;IACvB4D,MAAM,CAAC3H,qBAAP,CAA6B,EAA7B,EAAiC,IAAjC;;IACA2H,MAAM,CAAC9I,KAAP,CAAa0I,OAAb;EACD,CAHD;;EAKA,KAAKjD,iBAAL,GAAyB,UAAUmF,IAAV,EAAgB;IACvC,OAAO9B,MAAM,CAAC9I,KAAP,CAAawF,YAAb,CAA0BoF,IAA1B,EAAgC,OAAhC,CAAP;EACD,CAFD;;EAIA,KAAK5D,eAAL,GAAuB,UAAU4D,IAAV,EAAgB;IACrC,OAAO9B,MAAM,CAAC9I,KAAP,CAAawF,YAAb,CAA0BoF,IAA1B,EAAgC,KAAhC,CAAP;EACD,CAFD;;EAIA,KAAKjF,kBAAL,GAA0B,UAAU1B,KAAV,EAAiB;IACzC,IAAI9D,KAAK,GAAG2I,MAAM,CAAC/H,KAAP,CAAaZ,KAAzB;IAEA,OAAO8D,KAAK,CAAC2J,OAAN,CAAczN,KAAK,CAAC,CAAD,CAAnB,EAAwB,OAAxB,CAAP;EACD,CAJD;;EAMA,KAAK8G,gBAAL,GAAwB,UAAUhD,KAAV,EAAiB;IACvC,IAAI9D,KAAK,GAAG2I,MAAM,CAAC/H,KAAP,CAAaZ,KAAzB;IAEA,OAAO8D,KAAK,CAAC4J,QAAN,CAAe1N,KAAK,CAAC,CAAD,CAApB,EAAyB,OAAzB,CAAP;EACD,CAJD;AAKD,CAxhBD;;AA0hBAvC,QAAQ,CAACyD,aAAD,CAAR;AAEA,eAAenD,kBAAkB,CAACmD,aAAD,CAAjC"},"metadata":{},"sourceType":"module"}